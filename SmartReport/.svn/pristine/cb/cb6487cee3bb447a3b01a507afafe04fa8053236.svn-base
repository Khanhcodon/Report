define(function(){"use strict";return Backbone.View.extend({el:"#multiselectionbar",$documentList:$("#documentList"),totalUnread:0,totalRead:0,selectedList:[],events:{"tap #btnhidemultiselection":"hideSelectionBar","tap #btnmarkread":"markRead","tap #btnmarkunread":"markUnRead"},initialize:function(n){this.documentList=n.documentList;this.render()},render:function(){var n=this;this.hasRender||require([egov.template.document.multiselectionbar],function(t){n.$el.html(t);n.$("#btnhidemultiselection").materialButton();n.$(".mdl-menu").materialMenu();n.hasRender=!0});this.showMultiSelectionBar()},checkAllDocument:function(n){egov.helper.destroyClickEvent(n);var t=$(n.currentTarget).find(".checkbox");t.hasClass("checked")?(t.removeClass("checked"),egov.views.home.documents.removeAllSelected()):(t.addClass("checked"),egov.views.home.documents.setAllSelected());egov.views.home.documents.countDocumentsMark()},hideSelectionBar:function(n){egov.helper.destroyClickEvent(n);this.selectedList=[];this.totalRead=0;this.totalUnread=0;var t=this.documentList.model.filter(function(n){return n.get("Selected")==!0});_.each(t,function(n){n.set("Selected",!1)});egov.mobile.isTablet||egov.commonFn.event.showNavbar();$("#multiselectionbar").removeClass("display");$("#main-page").removeClass("showMultiSelectionBar");this.$documentList.find(".showMultiselectCheckBox").removeClass("showMultiselectCheckBox");egov.views.home.documents.isMultiSelecting=!1;this.documentList.removeAllSelected()},showMultiSelectionBar:function(){egov.mobile.isTablet||egov.commonFn.event.hideNavbar();$("#multiselectionbar").addClass("display");$("#main-page").addClass("showMultiSelectionBar")},markRead:function(n){egov.helper.destroyClickEvent(n);this.documentList.setViewed(this.selectedList,!0);this.hideSelectionBar()},markUnRead:function(n){egov.helper.destroyClickEvent(n);this.documentList.setViewed(this.selectedList,!1);this.hideSelectionBar()},add:function(n,t,i){var r=n.get("IsViewed")==1||n.get("IsViewed")==!0;t?(r?this.totalRead++:this.totalUnread++,this.selectedList.push(n)):(r?this.totalRead--:this.totalUnread--,this.selectedList.splice(this.selectedList.indexOf(n),1));this.totalUnread==this.selectedList.length?(this.$("#btnmarkread").show(),this.$("#btnmarkunread").hide()):this.totalRead==this.selectedList.length?(this.$("#btnmarkread").hide(),this.$("#btnmarkunread").show()):(this.$("#btnmarkread").show(),this.$("#btnmarkunread").show());this.$("#selectionCount").text(i)}})});