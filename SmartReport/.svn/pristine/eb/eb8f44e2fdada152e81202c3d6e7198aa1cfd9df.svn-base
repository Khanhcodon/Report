(function(n){function t(n){try{return eval(n)}catch(t){return n}}function r(){if(egov.utilities)return egov.utilities.url.getQueryStringValue("client")==="tool";require(["util/bkav.utilities"],function(){return egov.utilities.url.getQueryStringValue("client")==="tool"})}if(typeof n===undefined)throw t("egov.resources.notJqueryAlert");var i={Bmail:1,Gmail:2,Yahoo:3,MailExchange:4,MDaemon:5};window.helper={timeShowSoundNotify:6e4,hasHideAfterDisplayNotify:!1,timeOutHideNotify:null,timeHideAfterDisplayNotify:0,change:!0,isLoad:!1,isAllData:!1,isPlayAudio:!1,clearChangeTitle:null,connection:{isLoaded:!1,BmailLink:"?egov=1",KNTCLink:"/TalkingPeople",CalendarLink:"?egov=1&calendar=1",ChatLink:"",CssLinks:[],ContactMobile:"/mobile/#ContactPage",JsLinks:[],MailType:undefined},bkavElements:{bmail:{divContainId:"#div-bmail",iframeName:"bmail",tab:"#tab-bmail",name:t("egov.resources.bmail"),color:"egov-theme"},documents:{divContainId:"#div-document",iframeName:"documents",tab:"#tab-document",name:t("egov.resources.documentslabel"),color:"egov-theme"},chat:{divContainId:"#div-chat",iframeName:"chat",tab:"#tab-chat",name:t("egov.resources.chat"),color:"egov-theme"},calendar:{divContainId:"#div-calendar",iframeName:"calendar",tab:"#tab-calendar",name:t("egov.resources.calendar"),color:"egov-theme"},report:{divContainId:"#div-report",iframeName:"report",tab:"#tab-report",name:t("egov.resources.reportLabel"),color:"egov-theme"},kntc:{divContainId:"#div-kntc",iframeName:"kntc",tab:"#tab-kntc",name:t("egov.resources.kntc"),color:"egov-theme"},links:{divContainId:"#div-links",tab:"#tab-links",name:t("egov.resources.links"),color:"egov-theme"},statistics:{divContainId:"#div-statistics",iframeName:"statistics",tab:"#tab-statistics",name:t("egov.resources.statictisLabel"),color:"egov-theme"},overall:{divContainId:"#div-overall",iframeName:"overall",tab:"#tab-overall",name:t("egov.resources.overall"),color:"egov-theme"},bwss:{divContainId:"#div-bwss",iframeName:"bwss",tab:"#tab-bwss",name:"bwss",color:"egov-theme"},cbcl:{divContainId:"#div-cbcl",iframeName:"cbcl",tab:"#tab-cbcl",name:t("egov.resources.overall"),color:"egov-theme"},calendarregiter:{divContainId:"#div-calendarregiter",iframeName:"calendarregiter",tab:"#tab-calendarregiter",name:t("egov.resources.overall"),color:"egov-theme"}},isTool:r(),getContentWindow:function(n){if(n===undefined)return null;var t=document.getElementsByName(n);return t===undefined||t.length<=0?null:t[0].contentWindow},compareObject:function(n,t,i){var u,e,r,f;if(typeof n!="object"&&typeof t!="object")return n!=t?!1:!0;if(n instanceof Array&&t instanceof Array){if(n.length!==t.length)return!1;if(n.length>0)for(r=0;r<n.length;r++)if(!this.compareObject(n[r],t[r],i,!0))return!1;return!0}try{if(u=Object.getOwnPropertyNames(n),e=Object.getOwnPropertyNames(t),i&&u.length!==e.length)return!1;if(u.length>0)for(r=0;r<u.length;r++)if(f=u[r],!this.compareObject(n[f],t[f],!0))return!1;return!0}catch(o){return!1}},checkExistInArray:function(n,t,i){if(t instanceof Array&&t.length>0&&n)for(var r=0;r<t.length;r++)if(this.compareObject(n,t[r],i))return!0;return!1},playAudio:function(n){var t,i;try{t=this;t.isPlayAudio||(n||(n="../Content/Sound/notify.wav"),i=new Audio(n),i.play(),t.isPlayAudio=!0,window.setTimeout(function(){t.isPlayAudio=!1},t.timeShowSoundNotify))}catch(r){}},loadFrame:function(t,r){var e=this.bkavElements[t],o,f,u,s;e&&(o=document.getElementsByName(t),o.length===0?(f=n("<iframe>").attr("name",t).attr("id",t),u=this,u.connection.isLoaded?(s=u.getAppUrl(t),n(e.divContainId).append(f),f.attr("src",s),n(f).ready(function(){typeof r=="function"&&r()})):n.ajax({url:"/Home/GetConnectionSettings"}).success(function(o){var s,h;u.connection.ParentDomain=o.ParentDomain;u.connection.KNTCLink=o.KNTCLink+u.connection.KNTCLink;u.connection.ChatLink=o.ChatLink;u.connection.MailType=o.MailType;o.MailType==i.Bmail?(u.connection.BmailLink=o.BmailLink+u.connection.BmailLink,u.connection.BmailLink+="&domain"+u.connection.ParentDomain):(s=localStorage.getItem("mdaemonUrl"),s!=undefined?(u.connection.BmailLink=s,u.connection.CalendarLink=s):(u.connection.BmailLink=o.BmailLink,u.connection.CalendarLink=o.BmailLink));u.connection.isLoaded=!0;document.domain=u.connection.ParentDomain;h=u.getAppUrl(t);f.attr("src",h);n(e.divContainId).append(f);n(f).ready(function(){typeof r=="function"&&r()});u.showHideApp(o)})):(t==="kntc"&&(o[0].src=this.connection.KNTCLink),typeof r=="function"&&r()))},displayApp:function(t,i){var r,u;(r=this.bkavElements[t],r)&&(u=n('.menu-items a[data-ng-app = "'+t+'"]'),u.hasClass("active")||(n(".menu-items .active").removeClass("active"),u.addClass("active")),n(r.divContainId).siblings().hide(),n(r.divContainId).show(),r.iframeName&&(n("#colorTheme").attr("class",r.color),this.loadFrame(t,i),this.changeSearchApp(t)),t==="links"&&n(r.divContainId).is(":empty")&&n(r.divContainId).load("/Home/Linkeds"))},isCurrentFrame:function(t){var i,r;return(i=this.bkavElements[t],!i)?!1:(r=n('.menu-items a[data-ng-app = "'+t+'"]'),r.hasClass("active"))},getAppUrl:function(n){var t;switch(n){case"documents":return"/Home/Index";case"chat":return this.connection.ChatLink;case"calendar":return this.connection.CalendarLink;case"contact":return this.connection.ContactMobile;case"report":return"/ReportViewer/Index";case"statistics":return"/statistics/Index";case"overall":return"/Statistics/Index";case"kntc":return this.connection.KNTCLink;case"cbcl":return"/EvaluationCriteria/Index";case"calendarregiter":return"/Calendar/Index";default:return t=this.connection.BmailLink,this.isTool&&(t+="&client=tool"),t}},changeCreateButtonName:function(i){switch(i){case"documents":n(".li-create-new .create-new-label").text(t("egov.resources.lblDocument"));break;case"chat":n(".li-create-new .create-new-label").text(t("egov.resources.lblNewConversion"));break;case"calendar":n(".li-create-new .create-new-label").text(t("egov.resources.lblNewWorkTime"));break;case"bmail":n(".li-create-new .create-new-label").text(t("egov.resources.lblNewMail"));break;default:n(".li-create-new .create-new-label").text(t("egov.resources.lblNewMail"))}},changeSearchApp:function(i){switch(i){case"documents":n(".form-search").show();n(".search-type-btn").show();n("#MainSearchQuery").attr("placeholder",t("egov.resources.searchDocument"));break;case"chat":n(".form-search").hide();break;case"calendar":n(".form-search").hide();break;default:n(".form-search").show();n(".search-type-btn").hide();n("#MainSearchQuery").attr("placeholder",t("egov.resources.searchMail"))}},destroyEvent:function(n){n&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation())},changeTitle:function(n,t){window.document.title=this.change?n:t;this.change=!this.change},timer:function(n){var i="eGovCloud",r=this;helper.clearChangeTitle&&(window.clearInterval(helper.clearChangeTitle),window.document.title=i);n>0&&(helper.clearChangeTitle=window.setInterval(function(){r.changeTitle(t("egov.resources.youHave")+" "+n+" "+t("egov.resources.unreadDocuments"),i)},1e3))},deleteAllLocalStorage:function(){"localStorage"in window&&window.localStorage!==null&&window.localStorage.clear()},deleteAllCookies:function(){for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var t=i[n],r=t.indexOf("="),u=r>-1?t.substr(0,r):t;document.cookie=u+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}},setCookie:function(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u},getCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""},loadCss:function(t){var i=n("<link>");n("head").append(i);i.attr({rel:"stylesheet",type:"text/css",href:t})},loadJs:function(t){n.getScript(t)},loadBmailResources:function(){var t=this;n.each(this.connection.CssLinks,function(n,i){t.loadCss(i)});n.each(this.connection.JsLinks,function(n,i){t.loadJs(i)})},showHideApp:function(t){(t.BmailLink==undefined||t.BmailLink=="")&&n(".bmail, .calendar").remove();(t.ChatLink==undefined||t.ChatLink=="")&&n(".chat").remove()}}})(window.jQuery);