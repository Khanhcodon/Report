(function(n){function t(n,t,i){var r=new SOAPRequest,u=[];r.makeHeader(u,"js");r.makeActionFolderBody(u,"FolderActionRequest","zimbraMail",n,t);r.sendRequest("FolderActionRequest",u,i)}n.request={preAuthen:function(n){var t=new SOAPRequest,i=[];t.preAuthen(i);t.sendRequest("AuthRequest",i,n)},noOption:function(n){var t=new SOAPRequest,i=[];t.makeHeader(i,"js");t.makeNoOpRequest(i,"NoOpRequest","zimbraMail");t.sendRequest("NoOpRequest",i,n)},getUserInfo:function(n){var t=new SOAPRequest,i=[];t.makeHeader(i,"js",!0);t.makeGetInfoBody(i,"GetInfoRequest","zimbraAccount");t.sendRequest("GetInfoRequest",i,n)},getFolderMailList:function(n,t,i,r,u,f){var e=new SOAPRequest,o=[];e.makeHeader(o,"js");e.makeSearchBody(o,"SearchRequest","zimbraMail",n,t,i,r,u);e.sendRequest("SearchRequest",o,f)},readMail:function(n,t){if(!isUseBmail){egov.callback(t);return}var i=new SOAPRequest,r=[];i.makeHeader(r,"js");i.makeGetMsgBody(r,"GetMsgRequest","zimbraMail",n);i.sendRequest("GetMsgRequest",r,t)},msgAction:function(n,t,i){if(!isUseBmail){egov.callback(i);return}var r=new SOAPRequest,u=[];r.makeHeader(u,"js");r.makeMsgActionBody(u,"MsgActionRequest","zimbraMail",t,n);r.sendRequest("MsgActionRequest",u,i)},changeFolderStructure:function(n,t){var u,i,r;if(!isUseBmail){egov.callback(t);return}u=[];_.each(n.models,function(n){var t="<folder path='"+n.get("path")+"' id='"+n.get("id")+"' visible='"+n.get("visible");n.get("isOpen")==1&&(t+="' isOpen='1");t+="' link='"+n.get("link")+"' parentid='"+n.get("parentid")+"'><\/folder>";u.push(t)});i=new SOAPRequest;r=[];i.makeHeader(r,"js");i.makeFolderStructureBody(r,u.join(""),"zimbraMail");i.sendRequest("FolderStructureChangeRequest",r,t)},setFolderRead:function(n,i){t(n,"read",i)},setEmptyFolder:function(n,i){t(n,"empty",i)},sendMail:function(n,t,i,r){var u={},f=new SOAPRequest;f.makeJsonHeader(u);f.makeSendMsgBody(u,n[0],t,i);f.sendJsonRequest("SendMsgRequest",u,$(this),undefined,undefined,r)}}})(window.bmail=window.bmail||{});