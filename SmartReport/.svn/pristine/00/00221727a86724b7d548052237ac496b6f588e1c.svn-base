(function(n){var t=(n.browser.msie?"paste":"input")+".mask",i=window.orientation!=undefined;n.defineMask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};n.fn.extend({caret:function(n,t){if(this.length!=0){if(typeof n=="number")return t=typeof t=="number"?t:n,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(n,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}});if(this[0].setSelectionRange)n=this[0].selectionStart,t=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var i=document.selection.createRange();n=0-i.duplicate().moveStart("character",-1e5);t=n+i.text.length}return{begin:n,end:t}}},unmask:function(){return this.trigger("unmask")},mask:function(r,u){var c;if(!r&&this.length>0)return c=n(this[0]),c.data(n.defineMask.dataName)();u=n.extend({placeholder:"_",completed:null},u);var h=n.defineMask.definitions,f=[],o=r.length,s=null,e=r.length;return n.each(r.split(""),function(n,t){t=="?"?(e--,o=n):h[t]?(f.push(new RegExp(h[t])),s==null&&(s=f.length-1)):f.push(null)}),this.trigger("unmask").each(function(){function a(n){while(++n<=e&&!f[n]);return n}function k(n){while(--n>=0&&!f[n]);return n}function b(n,t){if(!(n<0)){for(var r=n,i=a(t);r<e;r++)if(f[r]){if(i<e&&f[r].test(l[i]))l[r]=l[i],l[i]=u.placeholder;else break;i=a(i)}y();c.caret(Math.max(s,n))}}function d(n){for(var r,o,t=n,i=u.placeholder;t<e;t++)if(f[t])if(r=a(t),o=l[t],l[t]=i,r<e&&f[r].test(o))i=o;else break}function g(n){var r=n.which;if(r==8||r==46||i&&r==127){var f=c.caret(),u=f.begin,t=f.end;return t-u==0&&(u=r!=46?k(u):t=a(u-1),t=r==46?a(t):t),w(u,t),b(u,t-1),!1}if(r==27)return c.val(p),c.caret(0,v()),!1}function nt(n){var r=n.which,t=c.caret(),i,o,s;return n.ctrlKey||n.altKey||n.metaKey||r<32?!0:r?(t.end-t.begin!=0&&(w(t.begin,t.end),b(t.begin,t.end-1)),i=a(t.begin-1),i<e&&(o=String.fromCharCode(r),f[i].test(o)&&(d(i),l[i]=o,y(),s=a(i),c.caret(s),u.completed&&s>=e&&u.completed.call(c))),!1):void 0}function w(n,t){for(var i=n;i<t&&i<e;i++)f[i]&&(l[i]=u.placeholder)}function y(){return c.val(l.join("")).val()}function v(n){for(var a,h=c.val(),i=-1,t=0,r=0;t<e;t++)if(f[t]){for(l[t]=u.placeholder;r++<h.length;)if(a=h.charAt(r-1),f[t].test(a)){l[t]=a;i=t;break}if(r>h.length)break}else l[t]==h.charAt(r)&&t!=o&&(r++,i=t);return!n&&i+1<o?(c.val(""),w(0,e)):(n||i+1>=o)&&(y(),n||c.val(c.val().substring(0,i+1))),o?t:s}var c=n(this),l=n.map(r.split(""),function(n){if(n!="?")return h[n]?u.placeholder:n}),p=c.val();c.data(n.defineMask.dataName,function(){return n.map(l,function(n,t){return f[t]&&n!=u.placeholder?n:null}).join("")});c.attr("readonly")||c.one("unmask",function(){c.unbind(".mask").removeData(n.defineMask.dataName)}).bind("focus.mask",function(){var t,i;p=c.val();t=v();y();i=function(){t==r.length?c.caret(0,t):c.caret(t)};(n.browser.msie?i:function(){setTimeout(i,0)})()}).bind("blur.mask",function(){v();c.val()!=p&&c.change()}).bind("keydown.mask",g).bind("keypress.mask",nt).bind(t,function(){setTimeout(function(){c.caret(v(!0))},0)});v()})}})})(jQuery);
//# sourceMappingURL=jquery.maskedinput-1.3.min.js.map
