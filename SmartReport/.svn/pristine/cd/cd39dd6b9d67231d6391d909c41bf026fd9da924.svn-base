define(["jquery","backbone",],function(n,t){"use strict";return t.View.extend({initialize:function(n){this.frame=n.frame;this.docCopyId=n.docCopyId;this.isTransfer=n.isTransfer;this.open()},open:function(){var t=this,n,i;t.isTransfer?egov.message.show("Bạn có đồng ý xác nhận bàn giao cho hồ sơ này không?",null,egov.message.messageButtons.YesNo,function(){t.save()}):(n={},i=egov.views.base.dialog,n.width=450,n.title="Đồng ý xác nhận xử lý cho hồ sơ này?",n.buttons=[{text:"Đồng ý",click:function(){t.save()}},{text:"Bỏ qua",click:function(){i.close()}}],egov.request.getUsersProcess({data:{documentCopyId:t.docCopyId},success:function(t){var f,r,u,e;if(t.error){egov.message.show(t.error);return}if(t.data){for(f="<span>Danh sách User đã tham gia xử lý.<\/span><\/br>",r=0;r<t.data.length;r++)u=_.sortBy(t.data,function(n){return n.IsViewed}),e=u[r].IsViewed==!0?"Đã xem":"Chưa xem",f+="<div>"+u[r].FullName+"("+u[r].Username+") - "+e+"<\/div>";i.open(f,n)}}}))},save:function(){var n,t,i=this;i.isTransfer?(n="confirmTransfer",t="Xác nhận bàn giao bị lỗi."):(n="confirmTransfer",t="Xác nhận xử lý bị lỗi.");egov.request[n]({data:{documentCopyId:i.docCopyId},success:function(n){n.error?egov.message.notification(n.error,egov.message.messageTypes.error):(egov.message.notification(n.success,egov.message.messageTypes.success),egov.message.notification(n.success,egov.message.messageTypes.success),egov.views.base.dialog.close())},error:function(){egov.message.notification(t,egov.message.messageTypes.error)}})}})});
//# sourceMappingURL=ConfirmTransferOrProcess.min.js.map
