define(function(){"use strict";return Backbone.View.extend({el:"#multiselectionbar",buttons:{isShowDelete:!1,isShowDeletePer:!1,isShowSpam:!1,isShowUnSpam:!1,isShowUnread:!1,isShowRestore:!1},totalSelected:0,totalRead:0,totalUnread:0,selectedMailsId:[],events:{"click #btnhidemultiselection":"hideMultiSelectionBar","click #btndelete":"deleteMail","click #btndeleteper":"deleteMailPer","click #btnspam":"markSpam","click #btnunspam":"unMarkSpam","click #btnunread":"markunread","click #btnread":"markRead","click #btnrestore":"restore"},initialize:function(n){this.mailList=n.mailList;this.initData();this.render();bmail.views.multiSelectionBar=this},initData:function(){this.model=bmail.current.folder.toolbar.model;this.buttons.isShowDelete=this.model.indexOf("delete")>-1;this.buttons.isShowDeletePer=this.model.indexOf("deletePer")>-1;this.buttons.isShowSpam=this.model.indexOf("spam")>-1;this.buttons.isShowUnSpam=this.model.indexOf("unspam")>-1;this.buttons.isShowUnread=this.model.indexOf("unread")>-1;this.buttons.isShowRestore=this.model.indexOf("restore")>-1},render:function(){var n=this;this.hasRender||require([bmail.templates.multiSelectionBar],function(t){n.$el.html($.tmpl(t,n.buttons));n.$(".mdl-button").materialButton();n.$(".mdl-menu").materialMenu();n.$(".mdl-js-ripple-effect").materialRipple();n.$el.show();n.hasRender=!0});this.showMultiSelectionBar()},checkAllDocument:function(n){egov.helper.destroyClickEvent(n);var t=$(n.currentTarget).find(".checkbox");t.hasClass("checked")?(t.removeClass("checked"),egov.views.home.documents.removeAllSelected()):(t.addClass("checked"),egov.views.home.documents.setAllSelected());egov.views.home.documents.countDocumentsMark()},hideMultiSelectionBar:function(n){egov.helper.destroyClickEvent(n);this.totalSelected=0;this.totalRead=0;this.totalUnread=0;this.selectedMailsId=[];egov.mobile.isTablet||egov.commonFn.event.showNavbar();$("#multiselectionbar").removeClass("display");$("#mailListWrap .mail-list").children().removeClass("showMultiselectCheckBox");this.hideDropDown();bmail.views.main.showNewBtn();bmail.views.maillist.isShowingMultiSelectionBar=!1;this.mailList.removeAllSelected()},showMultiSelectionBar:function(){egov.mobile.isTablet||egov.commonFn.event.hideNavbar();bmail.views.main.hideNewBtn();$("#multiselectionbar").addClass("display")},hideDropDown:function(){this.$el.find(".mdl-menu__container").removeClass("is-visible")},add:function(n,t,i){n?(t.get("unread")?this.totalUnread++:this.totalRead++,this.selectedMailsId.push(t.id),this.totalSelected++):(t.get("unread")?this.totalUnread--:this.totalRead--,this.selectedMailsId.splice(this.selectedMailsId.indexOf(t.id),1),this.totalSelected--);this.totalUnread==this.totalSelected?(this.$("#btnread").show(),this.$("#btnunread").hide()):this.totalRead==this.totalSelected?(this.$("#btnread").hide(),this.$("#btnunread").show()):(this.$("#btnread").show(),this.$("#btnunread").show());this.$("#selectionCount").text(i)},deleteMail:function(n){egov.helper.destroyClickEvent(n);this.mailList.deleteMail(this.selectedMailsId.join(","));this.hideMultiSelectionBar()},deleteMailPer:function(n){egov.helper.destroyClickEvent(n);this.mailList.deleteMailPer(this.selectedMailsId.join(","));this.hideMultiSelectionBar()},markSpam:function(n){egov.helper.destroyClickEvent(n);this.mailList.markSpam(this.selectedMailsId.join(","));this.hideMultiSelectionBar()},unMarkSpam:function(n){egov.helper.destroyClickEvent(n);this.mailList.unMarkSpam(this.selectedMailsId.join(","));this.hideMultiSelectionBar()},markRead:function(n){egov.helper.destroyClickEvent(n);this.mailList.markAsRead(this.selectedMailsId.join(","));this.$("#btnread").parent().hide();this.$("#btnunread").parent().show();this.hideMultiSelectionBar()},markunread:function(n){egov.helper.destroyClickEvent(n);this.mailList.markUnRead(this.selectedMailsId.join(","));this.$("#btnunread").parent().hide();this.$("#btnread").parent().show();this.hideMultiSelectionBar()},restore:function(){this.mailList.restore(this.selectedMailsId.join(","));this.hideMultiSelectionBar()}})});