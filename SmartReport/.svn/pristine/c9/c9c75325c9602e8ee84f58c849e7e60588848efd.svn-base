define([],function(){return Backbone.View.extend({tagName:"nav",template:'<ul class="pagination pagination-sm"><\/ul>',pageTemplate:'<li><a href="#" page="{0}" class="page">{0}<\/a><\/li>',disabledClass:"disabled",activeClass:"active",events:{"click a.page":"_selectPage","click a.next":"_nextPage","click a.previour":"_prevPage","click .btnGotoPage":"_gotoInput"},option:{pageSizeOption:[50,100,150,200],pageSize:50,total:0,totalPage:0,currentPage:1,displayPageCount:4,showPrevious:!0,showNext:!0,shopChangePageSize:!0,showGoInput:!0,autoHidePrevious:!0,autoHideNext:!0,showNavigator:!0,showPageNumber:!0,onload:null,select:null},initialize:function(n){this.$el.attr("aria-label","Page navigation");this.option=$.extend({},this.option,n);this.option.totalPage=Math.ceil(this.option.total/this.option.pageSize);this.option.showPageNumber||(this.option.showGoInput=!1);this.render()},render:function(){if(this.$el.html(this.template),this.$pager=this.$(".pagination"),this.option.totalPage===0||this.option.totalPage===1)return this;if(this.option.showPrevious&&this.$pager.append('<li><a href="#" aria-label="Previous" class="previour"><span aria-hidden="true">&laquo;<\/span><\/a><\/li>'),this.option.showPageNumber&&this._renderPages(this.option.currentPage),this.option.showNext&&this.$pager.append('<li><a href="#" aria-label="Next" class="next"><span aria-hidden="true">&raquo;<\/span><\/a><\/li>'),this.option.showGoInput){var n=this._bindGotoInput();this.$el.append(n)}if(this._activeCurrent(),this.option.onload&&typeof this.option.onload=="function")this.option.onload(this)},show:function(){this.$el.show()},hide:function(){this.$el.hide()},getSelectedPage:function(){return this.option.currentPage},nextPage:function(){this._nextPage()},previourPage:function(){this._prevPage()},_renderPages:function(n){var i,r,f,u,t;if(this.option.totalPage<=this.option.displayPageCount){for(i=1,r=this.option.totalPage,t=i;t<=r;t++)this.$pager.append(String.format(this.pageTemplate,t));return}if(f=Math.floor(this.option.displayPageCount/2),i=n-f,i<=0&&(i=1),r=i+this.option.displayPageCount,r>this.option.totalPage&&(r=this.option.totalPage,i=r-this.option.displayPageCount),u=1,i>u)if(this.$pager.append(String.format(this.pageTemplate,u)),i>f+u)this.$pager.append($(String.format(this.pageTemplate,"...")).addClass(this.disabledClass));else for(t=u+1;t<i;t++)this.$pager.append(String.format(this.pageTemplate,t));for(t=i;t<=r;t++)this.$pager.append(String.format(this.pageTemplate,t));if(r<this.option.totalPage){if(this.option.totalPage>f+r)this.$pager.append($(String.format(this.pageTemplate,"...")).addClass(this.disabledClass));else for(t=r+1;t<this.option.totalPage;t++)this.$pager.append(String.format(this.pageTemplate,t));this.$pager.append(String.format(this.pageTemplate,this.option.totalPage))}},_nextPage:function(){var n=this.option.currentPage+1;this._gotoPage(n)},_prevPage:function(){var n=this.option.currentPage-1;this._gotoPage(n)},_selectPage:function(n){var t=$(n.target).closest("a"),i;t.parent().is(".disabled")||(i=t.attr("page"),this._gotoPage(i))},_gotoInput:function(){var n=this.$(".gotopage").val();this._gotoPage(n)},_gotoPage:function(n){n=parseInt(n);n>this.option.totalPage&&(n=this.option.totalPage);this.option.currentPage=n;this.render();this._callback()},_activeCurrent:function(){var t=this.option.currentPage,i=this.$('a[page="'+t+'"]'),n;i.length!==0&&(n=i.parent(),n&&(n.siblings().removeClass(this.activeClass),n.addClass(this.activeClass)),this.option.showGoInput&&this.$(".gotopage").val(t))},_bindGotoInput:function(){var n=$("<ul class='pagination pagination-sm paging-input' style='margin-left:15px;'>");return n.append("<li style='border: none'><a>Xem trang: <input type='text' class='gotopage' style='width: 20px;border: none;padding: 0;'/><\/a><\/li>"),n.append("<li style='border: none'><a><span href='#' class='btnGotoPage'>xem<\/span><\/a><\/li>"),n},_callback:function(){this.option.select&&typeof this.option.select=="function"&&this.option.select(this.option.currentPage)}})});