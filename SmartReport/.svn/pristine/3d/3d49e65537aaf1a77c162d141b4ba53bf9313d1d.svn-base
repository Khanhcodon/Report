define([egov.template.question.documentQuestions,],function(n){"use strict";return Backbone.View.extend({className:"documentQuestions",template:n,events:{"click .listQuestion li .basicInfo":"selectQuestion","click .lblshowadvancededit":"showAdvancedEdit","change .chkShowAdvancedEdit":"advancedEdit","click .formanswer .btnAnswer":"answerQuestion"},initialize:function(n){this.documentId=n.documentId;this.document=n.document;var t=this;return},render:function(n){var t=this;n instanceof Array&&n.length>0&&(t.$el.append($.tmpl(t.template,{questions:n})),t.document.$("#divQuestions").html(t.$el).show())},selectQuestion:function(n){$(n.currentTarget).closest("li").toggleClass("selected")},showAdvancedEdit:function(n){$(n.currentTarget).prev(".chkShowAdvancedEdit").click()},advancedEdit:function(n){var t=$(n.currentTarget);t.is(":checked")?this._enableEditor(t.closest(".formanswer")):this._disableEditor(t.closest(".formanswer"))},answerQuestion:function(n){egov.helper.destroyClickEvent(n);var t=$(n.currentTarget).closest("li"),i="";if(this.isShowAdvanceEdit){if(i=t.find(".divAnswer").html(),i.trim()==""){t.find(".divAnswer").focus();return}}else if(i=t.find(".txtAnswer").val(),i.trim()==""){t.find(".txtAnswer").focus();return}egov.request.answerQuestion({data:{questionId:t.data("questionid"),answer:escape(i),isActive:!0},success:function(){t.remove()},error:function(n){console.log(n)}})},_disableEditor:function(n){n.editor("destroy");this.isShowAdvanceEdit=!1;n.find(".advanceeditor").hide();n.find(".txtAnswer").show()},_enableEditor:function(n){var t=n.find(".advanceeditor"),i=t.find(".alhToolbar"),r=this;t.find(".divAnswer").editor(i,function(){r.isShowAdvanceEdit=!0;n.find(".txtAnswer").hide();t.show();$(".divAnswer").focus()})}})});