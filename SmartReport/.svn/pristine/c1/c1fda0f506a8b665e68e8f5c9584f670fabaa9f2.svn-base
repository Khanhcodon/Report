function getBasicConnectionData(n){$.ajax({url:"/Home/GetConnectionSettings"}).success(function(n){n.BmailLink!=null&&n.BmailLink!=""&&(bmailServer=getUrlOrigin(n.BmailLink),bmailServer&&(Util.createCookie("serverAddress",bmailServer,7),homeService=bmailServer+"/service/home/"));n.ChatLink!=null&&n.ChatLink!=""&&(chatServer=getUrlOrigin(n.ChatLink),chatServer&&Util.createCookie("chatAddress",chatServer,7))}).error(function(){console.warn("unknown mail address")}).complete(function(){egov.callback(n)})}function readAuthenCookie(){return Util.readCookie("bkavAuthen")}function getFolderInfo(n){var t=bmail.models.folderInfo.filter(function(t){return t.id===n});if(t&&t.length>0)return t[0]}function setBasicFolderInfo(n,t){var i=bmail.models.folderInfo.find(function(t){return t.id==n});if(!i){var r="",u=!1,f=bmail.models.folderInfo.find(function(n){return n.id==t});f?(r=f.idPath+"/"+n,u=f.isPublicFolder):(r=n,u=n>6);i={id:n,isPublicFolder:u,idPath:r,unread:0,perm:readPermission("rwip")};bmail.models.folderInfo.push(i)}return i}function readFolderInfo(n){readFolder(n.folder);readFolder(n.link);bmail.views.folderlist&&bmail.views.folderlist.rebindTotalUnread()}function readFolder(n){n&&$.each(n,function(){var n=setBasicFolderInfo(this.id,this.l);typeof this.perm=="undefined"&&(this.perm="rwip");typeof this.u=="undefined"&&(this.u=0);n.perm=readPermission(this.perm);n.unread=this.u;n.name=this.name;typeof this.folder=="object"?readFolder(this.folder):typeof this.link=="object"&&readFolder(this.link)})}function readPermission(n){return{read:n.match("r")!=null,write:n.match("w")!=null,insert:n.match("i")!=null,post:n.match("p")!=null}}function getUrlOrigin(n){const t=$("<a />").attr("href",n)[0];var i=t.protocol+"//"+t.hostname;return t.port.length>0&&(i+=":"+t.port),i}var sessionId=0,autoCompleteResult,caret,currentMsgIds=[],idMailDraft=null,idnt=null,irt=null,midPart=[],fileNameAtt=[],detailMailLen=0,firstLoadMailNumber=50,maxUnreadMailNotify=99,more,currentMailListCount=0,currentIndex,tabMailDetailId,hasDeletedMail=!1,isLoadMore=!1,isSearch=!1,isrefresh=!1,enableScrollView=!1,bmailServer=Util.readCookie("serverAddress"),chatServer=Util.readCookie("chatAddress"),homeService="",cookie_user=username.toLowerCase(),folderUtil;bmail.models={};bmail.models.folderInfo=[];folderUtil=function(){};folderUtil.prototype.getFolder=function(n){return bmail.models.folderInfo.find(function(t){return t.id==n})};folderUtil.prototype.isSendToMyFolder=function(n){try{var t=this.getFolder(n);return t!=undefined}catch(i){console.log(i)}return!1};bmail.folderUtil=new folderUtil;