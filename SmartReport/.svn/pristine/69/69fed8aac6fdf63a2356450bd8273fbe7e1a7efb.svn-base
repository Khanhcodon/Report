define([egov.template.document.dateResponseAddresses],function(n){return Backbone.View.extend({tagName:"div",className:"form-horizontal",template:n,initialize:function(n){var t=this;this.defaultDateResponse=n.dateResponse;this.offices=n.listAddress;this.success=n.callback;this.render()},render:function(){var n=this,t=[],i;return _.each(this.offices,function(n){t.push(n.toJSON())}),this.$el.html($.tmpl(this.template,t)),this.$(".datepicker").attr("placeholder",this.defaultDateResponse?this.defaultDateResponse.format("dd/MM/yyyy"):"Chưa đặt hạn"),this.$(".datepicker").datepicker(),_.each(this.offices,function(t){t.get("isSelected")&&t.get("DateResponse")&&n.$el.find("#"+t.get("AddressId")).find(".datepicker").datepicker("setDate",t.get("DateResponse"))}),i={width:450,height:"auto",draggable:!0,keyboard:!0,modal:!0,title:"Đặt hạn hồi báo",buttons:[{text:"Lưu",className:"btn-success",click:function(){n.save()}},{text:egov.resources.common.closeButton,click:function(){n.$el.dialog("destroy")}},]},n.$el.dialog(i),n},save:function(){var n=this;this.$(".addess-item").each(function(){var r=$(this).attr("id"),t=$(this).find(".datepicker").datepicker("getDate"),i=_.find(n.offices,function(n){return n.get("AddressId")==r});i&&t&&(i.set("DateResponse",t),i.set("DateResponseFormat",t.format("dd/MM/yyyy")))});n.$el.dialog("destroy");n.success()}})});