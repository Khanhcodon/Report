define([egov.template.document.supplementary],function(n){"use strict";var t=Backbone.View.extend({initialize:function(n){this.$(".supplementary-list").empty();var t=this;t.supplementary=n.supplementary;t.document=n.document;t.model=new egov.models.supplementaryList(t.supplementary);n.document.model.set("Supplementary",t.model);t.model.on("add",function(n){t.$el.parents(".document-supplementary").show();t._addSuppItem(n)});t.model.on("remove",function(n){n.view.$el.remove();t.model.length==0&&t.$el.parent().hide()});return t.render(),t},render:function(){var n=this;return this.model.length>0?(this.$el.parents(".document-supplementary").show(),this.model.each(function(t){n._addSuppItem(t)})):this.$el.parents(".document-supplementary").hide(),this},_addSuppItem:function(n){var t=this,r=new i({model:n,parent:t});t.$el.find(".supplementary-list").append(r.$el)}}),i=Backbone.View.extend({tagName:"tr",template:n,selectedClass:"rowSelected",events:{click:"selected","click .supp-open":"_open",dblclick:"_open"},initialize:function(n){this.parent=n.parent;this.render();var t=this;this.model.on("change:UserReceivedId",function(){t.render()})},render:function(){return this.$el.empty(),this.$el.append($.tmpl(this.template,this.model.toJSON())),this.model.view=this,this},selected:function(){egov.helper.hideAllContext();this.$el.addClass(this.selectedClass);this.$el.siblings("."+this.selectedClass).removeClass(this.selectedClass)},_open:function(){egov.helper.hideAllContext();var n=this,t=undefined;n.parent.document.receiveSupplementary(n.model.get("SupplementaryId"),this)}});return t});