(function(n,t,i){function f(){var u,f,r=0,e=0,i=[],t;this.init=function(n,t){u=n<0?0:n;f=t<0?0:t;r=0;i=[]}.bind(this);this.getId=function(){return u}.bind(this);this.getTypeId=function(){return f}.bind(this);this.getPosRow=function(){return r}.bind(this);this.setPosRow=function(n){r=n}.bind(this);this.getPosOrder=function(){return e}.bind(this);this.setPosOrder=function(n){e=n}.bind(this);this.getProperties=function(){return i}.bind(this);this.setProperties=function(n){i=n}.bind(this);this.getProperty=function(n){var r=!1;for(var t in i)if(typeof i[t].getId=="function"&&i[t].getId()==n){r=i[t];break}return r}.bind(this);this.setProperty=function(n){if(!n.getId())return!1;for(var t in i)if(i[t].getId()==n.getId())return i[t]=n,!0;return!1}.bind(this);t=this;this.getControlId=function(){var n=t.getProperty("p15");if(n==!1)throw"ControlId không thể rỗng.";else return n.getValue()}.bind(this);this.getControlValue=function(){var n=t.getProperty("p1");return n?n.getValue():""}.bind(this);this.getCatalogSelected=function(){var n=t.getProperty("p31");return n==!1?"":n.getValue()}.bind(this);this.getControlMask=function(){var n=t.getProperty("p19");return n==!1?"":n.getValue()}.bind(this);this.getControlGlobalCode=function(){var n=t.getProperty("p24");return n==!1?"":n.getValue()}.bind(this);this.getControlReadOnly=function(){var n=t.getProperty("p16");return n==!1?"":n.getValue()}.bind(this);this.getRequirementControl=function(){var n=t.getProperty("p13");return n==!1?!1:n.getValue()}.bind(this);this.getControlTitle=function(){var n=t.getProperty("p17");return n==!1?"":n.getValue()}.bind(this);this.getDependenciesOfValue=function(){var i=t.getProperty("p26"),n;return i==!1?"":(n=i.getValue().replace(/\s+/g,""),n.split("@").length>=2)?n.split("@")[1].split(","):""}.bind(this);this.getExpressionOfValue=function(){var i=t.getProperty("p26"),n;return i==!1?"":(n=i.getValue().replace(/\s+/g,""),n.split("@").length>=2)?n.split("@")[0]:""}.bind(this);this.getDependenciesOfValidate=function(){var i=t.getProperty("p28"),n;return i==!1?"":(n=i.getValue().replace(/\s+/g,""),n.split("@").length>=2)?n.split("@")[1].split(","):""}.bind(this);this.getExpressionOfValidate=function(){var i=t.getProperty("p28"),n;return i==!1?"":(n=i.getValue().replace(/\s+/g,""),n.split("@").length>=2)?n.split("@")[0]:""}.bind(this);this.getKey=function(){return n.efTools._formId_+"_"+t.getControlId()+t.getTypeId()}.bind(this);this.getTitleId=function(){return n.cfgPrefixId.divLabelId+t.getKey()}.bind(this);this.getPanelId=function(){return n.efTools._formId_+n.cfgPrefixId.divControlId+t.getId()}.bind(this);this.setControlValue=function(n){var i=t.getProperty("p1");i!=!1&&i.setValue(n)}.bind(this);this.setControlId=function(n){var i=t.getProperty("p15");i!=!1&&i.setValue(n)}.bind(this);this.setCatalogSelected=function(n){var i=t.getProperty("p31");i!=!1&&i.setValue(n)}.bind(this);this.setPropertyValue=function(n,i){var r=t.getProperty(n);r!=!1&&r.setValue(i)}.bind(this);this.setControlTitle=function(n){var i=t.getProperty("p17");i!=!1&&i.setValue(n)}.bind(this);this.setControlGlobalCode=function(n){var i=t.getProperty("p24");i!=!1&&i.setValue(n)}.bind(this);this.AddProperty=function(n){n.getId()&&(i.length==0?i[0]=n:i[i.length]=n)}.bind(this)}function a(n,t,i){this.Text=n;this.Value=t;this.Selected=i}var l=function(){var t,n,r,u,f="",e="",o="";this.init=function(s,h,c,l,a,v,y){t=s<0?0:s;n=h==i?"":h;r=c==i?!1:c;u=l==i?!1:l;f=a;e=v;o=y}.bind(this);this.getId=function(){return t}.bind(this);this.getValue=function(){var t=n;return typeof t=="string"&&(t=t.replace(/&quot;/g,'"')),t}.bind(this);this.setValue=function(t){typeof t=="string"&&(t=t.replace(/"/g,"&quot;"));n=t}.bind(this);this.IsDefault=function(){return r}.bind(this);this.IsMultiLine=function(){return u}.bind(this);this.getUIName=function(){return f}.bind(this);this.getUIValue=function(){return e}.bind(this);this.getUIDescription=function(){return o}.bind(this)},u=function(n,t){var o=[],f,u,r,e;for((t==i||t=="")&&(t="\n"),f=n.split(t),u=0;u<f.length;u++)r=f[u].trim(),e=!1,r.indexOf("#")==0&&(e=!0,r=r.substring(1)),o[u]=new a(r,r,e);return o},e={constructor:function(){jQuery.extend(!0,this,e)},init:function(t,i){var e,o,h,r,s,u;if(!this.IsExistControl(i))return!1;for(e=new f,e.init(t,i),o=0,h=n.controllib[i].length;o<h;o++)if((r=n.propertylib[n.controllib[i][o]],r!=null)&&r.length!=0){if(s=0,r.length>1)for(u=0;u<r.length;u++)if(r[u].IsDefault()){s=u;break}e.AddProperty(new n.PropertyEntity(r[s].getId(),r[s].getValue()))}return e},IsExistControl:function(t){return n.controllib[t]instanceof Array?!0:!1},SetPropertieOfControl:function(i,r,u,f){var o=t("#"+u),e=t("#"+(f==!0?n.cfgPrefixId.divLabelId:"")+u);switch(i){case"p1":r!=""&&o.html(r);break;case"p2":e.css("font-weight",r);break;case"p3":e.css("font-style",r);break;case"p4":e.css("font-size",r);break;case"p5":e.css("color",r);break;case"p6":r!=""&&o.parent().css("width",r);break;case"p7":r!=""&&o.parent().css("height",r);break;case"p8":e.css("text-decoration",r);break;case"p9":e.css("font-family",r);break;case"p10":e.css("background-color",r);break;case"p16":r=="true"?o.attr("readonly",r):o.removeAttr("readonly");break;case"p18":e.css("text-align",r);break;case"p20":o.css("text-transform",r)}},LoadProperty:function(n,t,i){this._base.LoadProperties(n,t,i)},LoadProperties:function(i,r,u,f){var v=i.getKey(),w=f==!0?n.cfgPrefixId.divLabelId:"",b=n.cfgPrefixId.divControlId+i.getId(),o=r,e=n.cfgPrefixId.divPropertyId+o.getId(),c=n.propertylib[o.getId()],a={inputCssText:function(n){t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).change(function(){t(this).val()==""?t("#"+w+v).css(n,""):t("#"+w+v).css(n,t(this).val());t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).trigger("change")},inputCssSize:function(n,r){r!=!0&&(r=!1);t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).change(function(){var f,u;t(this).val(trim(t(this).val()));parseInt(t(this).val())>0?f=!0:t(this).val("");t(this).val()==""?(r||t("#"+v).css(n,""),t("#"+b).css(n,"")):(u=t(this).val().substring(t(this).val().length-1),parseInt(u)>-1&&t(this).val(t(this).val()+"px"),r||t("#"+v).css(n,t(this).val()),t("#"+b).css(n,t(this).val()));t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).trigger("change")},selectCssOption:function(n,r){t("<select><\/select>").attr("id",e).attr("name",e).appendTo("#"+u).change(function(){t(this).val()==""?r==!0?t("#"+v).css(n,""):t("#"+w+v).css(n,""):r==!0?t("#"+v).css(n,t(this).val()):t("#"+w+v).css(n,t(this).val());t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).trigger("change");for(var f=0,s=c.length;f<s;f++)c[f].getValue()==o.getValue()?t("<option />").attr("selected","selected").attr("value",c[f].getValue()).html(c[f].getUIValue()).appendTo("#"+e):t("<option />").attr("value",c[f].getValue()).html(c[f].getUIValue()).appendTo("#"+e)},selectOption:function(){t("<select><\/select>").attr("id",e).attr("name",e).appendTo("#"+u).change(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).trigger("change");for(var n=0,r=c.length;n<r;n++)c[n].getValue()==o.getValue()?t("<option />").attr("selected","selected").attr("value",c[n].getValue()).html(c[n].getUIValue()).appendTo("#"+e):t("<option />").attr("value",c[n].getValue()).html(c[n].getUIValue()).appendTo("#"+e)},checkOption:function(){t("<div style='clear:both;'><\/div>").attr("id",e).attr("name",e).appendTo("#"+u).change(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).trigger("change");for(var n=0,r=c.length;n<r;n++)t("<div><\/div>").attr("id","divCbx"+e+n).attr("name","divCbx"+e+n).appendTo("#"+e),t("<input/>").attr("type","checkbox").attr("id",c[n].getId()+"cbx"+n).attr("name",c[n].getId()+"cbx"+n).val(c[n].getValue()).appendTo("#divCbx"+e+n),t("<span/>").html(c[n].getUIValue()).appendTo("#divCbx"+e+n)}},y,l,s,h,p;switch(o.getId()){case"p1":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t("#"+i.getId()+i.getTypeId()).val(t(this).val());t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).trigger("keyup");break;case"p2":a.selectCssOption("font-weight");break;case"p3":a.selectCssOption("font-style");break;case"p4":a.inputCssSize("font-size");break;case"p5":a.inputCssText("color");break;case"p6":a.inputCssSize("width",!0);break;case"p7":a.inputCssSize("height",!0);break;case"p8":a.selectCssOption("text-decoration");break;case"p9":a.selectCssOption("font-family");break;case"p10":a.inputCssText("background-color");break;case"p15":t("<span><\/span>").html(o.getValue()==""?v:o.getValue()).css({"font-weight":"bold",color:"blue"}).appendTo("#"+u);break;case"p16":a.selectOption();break;case"p17":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t("#"+n.cfgPrefixId.divLabelId+i.getKey()).html(t(this).val());t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())});break;case"p18":a.selectCssOption("text-align");break;case"p20":a.selectCssOption("text-transform",!0);break;case"p21":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())});break;case"p22":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())});break;case"p23":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())});break;case"p24":t("<span />").attr("id",e).attr("name",e).html(o.getValue()).appendTo("#"+u);break;case"p25":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).focus(function(){t(".controlId").css("visibility","visible")}).focusout(function(){t(".controlId").css("visibility","hidden")});break;case"p26":y=o.getValue();l=y.split("@");l.length!=2?(s=y,h=""):(s=t.trim(l[0]),h=t.trim(l[1]));t("<div style='clear:both;'><\/div>").attr("id","divjsEx"+e).attr("name","divjsEx"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Biểu thức:").appendTo("#divjsEx"+e);t("<input />").attr("id","txtEx"+e).attr("name","txtEx"+e).val(s).appendTo("#divjsEx"+e).keyup(function(){t(this).val()!=null&&(s=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+h))}).trigger("keyup").focus(function(){t(".controlId").css("visibility","visible")}).focusout(function(){t(".controlId").css("visibility","hidden")});t("<div><\/div>").attr("id","divjsMsg"+e).attr("name","divjsMsg"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Phụ thuộc:").appendTo("#divjsMsg"+e);t("<input />").attr("id","txtMsg"+e).attr("name","txtMsg"+e).val(h).appendTo("#divjsMsg"+e).keyup(function(){t(this).val()!=null&&(h=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+h))}).trigger("keyup").focus(function(){t(".controlId").css("visibility","visible")}).focusout(function(){t(".controlId").css("visibility","hidden")});break;case"p27":t("<input />").attr("id",e).attr("name",e).val(o.getValue()).appendTo("#"+u).keyup(function(){t(this).val()!=null&&i.setPropertyValue(o.getId(),t(this).val())}).focus(function(){t(".controlId").css("visibility","visible")}).focusout(function(){t(".controlId").css("visibility","hidden")});break;case"p28":y=o.getValue();l=y.split("@");l.length!=3?(s=y,h="",p=""):(s=t.trim(l[0]),p=t.trim(l[1]),h=t.trim(l[2]));t("<div style='clear:both;'><\/div>").attr("id","divjsEx"+e).attr("name","divjsEx"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Biểu thức:").appendTo("#divjsEx"+e);t("<input />").attr("id","txtEx"+e).attr("name","txtEx"+e).val(s).appendTo("#divjsEx"+e).keyup(function(){t(this).val()!=null&&(s=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+p+"@"+h))}).trigger("keyup").focus(function(){t(".controlId").css("visibility","visible")}).focusout(function(){t(".controlId").css("visibility","hidden")});t("<div><\/div>").attr("id","divjsMsg"+e).attr("name","divjsMsg"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Thông báo lỗi:").appendTo("#divjsMsg"+e);t("<input />").attr("id","txtMsg"+e).attr("name","txtMsg"+e).val(h).appendTo("#divjsMsg"+e).keyup(function(){t(this).val()!=null&&(h=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+p+"@"+h))}).trigger("keyup");t("<div><\/div>").attr("id","divjsPthuoc"+e).attr("name","divjsPthuoc"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Phụ thuộc:").appendTo("#divjsPthuoc"+e);t("<input />").attr("id","txtPthuoc"+e).attr("name","txtPthuoc"+e).val(p).appendTo("#divjsPthuoc"+e).keyup(function(){t(this).val()!=null&&(p=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+p+"@"+h))}).trigger("keyup").focus(function(){t(".controlId").css("visibility","visible")}).focusout(function(){t(".controlId").css("visibility","hidden")});break;case"p29":y=o.getValue();l=y.split("@");l.length!=2?(s=y,h=""):(s=t.trim(l[0]),h=t.trim(l[1]));t("<div style='clear:both;'><\/div>").attr("id","divjsEx"+e).attr("name","divjsEx"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Biểu thức:").appendTo("#divjsEx"+e);t("<input />").attr("id","txt"+e).attr("name","txt"+e).val(s).appendTo("#divjsEx"+e).keyup(function(){t(this).val()!=null&&(s=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+h))}).trigger("keyup");t("<div><\/div>").attr("id","divjsMsg"+e).attr("name","divjsMsg"+e).appendTo("#"+u);t("<span  style='float: left; min-width: 100px;'/>").html("Thông báo lỗi:").appendTo("#divjsMsg"+e);t("<input />").attr("id","txt"+e).attr("name","txt"+e).val(h).appendTo("#divjsMsg"+e).keyup(function(){t(this).val()!=null&&(h=t.trim(t(this).val()),i.setPropertyValue(o.getId(),s+"@"+h))}).trigger("keyup");break;case"p30":t("<input />").attr("id",e).attr("name",e).attr("type","checkbox").attr("checked",o.getValue()=="true"?!0:!1).appendTo("#"+u).click(function(){i.setPropertyValue(o.getId(),t(this).is(":checked"))}).trigger("keyup")}},Create:null,Add:null,Load:null,View:null},r=e.constructor,o={constructor:function(){this._base=jQuery.extend(!0,this,new r);jQuery.extend(!0,this,o)},Create:function(n,r,f){var s=this._base.init(n,r),h,e,l,c;if(s==i||s==!1)return!1;h=s.getKey();t("<div><\/div>").attr("id",h).css({width:"99%",float:"left"}).appendTo("#"+f);var o=s.getProperties(),a=[],v=1;for(e=0,l=o.length;e<l;e++){c=o[e].getId();switch(c){case"p11":o[e].getValue()!=""&&(a=u(o[e].getValue()));break;case"p12":o[e].getValue()!=""&&(v=parseInt(o[e].getValue()));break;default:this._base.SetPropertieOfControl(c,o[e].getValue(),h)}}return s},Add:function(r,u){if(r==i||r==!1)return!1;var f=r.getKey();return t("<div><\/div>").attr("id",f).css({width:"99%",float:"left"}).appendTo("#"+u),t("<ul><\/ul>").attr("id",f).attr("name",f).attr("data-bind","template: { name: 'choiceTmpl', foreach: fformModel.catalog"+f+", templateOptions: { selections: "+f+" } }, event:{ change:"+f+"Validate }").css("float","left").appendTo("#"+u),t("#"+f).css({width:parseInt(t("#"+u).css("width"))-parseInt(t("#"+n.cfgPrefixId.divLabelId+f).css("width"))-15+"px"}),!0},Load:function(){return!0},LoadProperty:function(i,r,f){var s=i.getKey(),e=r,o=n.cfgPrefixId.divPropertyId+e.getId();switch(e.getId()){case"p11":t("<br />").appendTo("#"+f);t("<textarea><\/textarea>").attr("id",o).attr("name",o).attr("rows","7").css({width:"350px"}).val(e.getValue()).appendTo("#"+f).keyup(function(){var r=u(t(this).val()),f=parseInt(t("#p12prop").val()),o=i.getKey(),s=new n.Checklist;s.ReBind(o,r,f);t(this).val()!=null&&i.setPropertyValue(e.getId(),t(this).val())}).trigger("keyup");break;case"p12":t("<input />").attr("id",o).attr("name",o).attr("type","text").val(e.getValue()).appendTo("#"+f).keyup(function(){var r=parseInt(t(this).val());if(r>0)t(this).val(r);else return;var f=u(t("#p11prop").val()),o=parseInt(t(this).val()),s=i.getKey(),h=new n.Checklist;h.ReBind(s,f,o);t(this).val()!=null&&i.setPropertyValue(e.getId(),t(this).val())}).trigger("keyup");break;default:this._base.LoadProperties(i,e.getId(),f)}}},w=o.constructor,s={constructor:function(){this._base=jQuery.extend(!0,this,new r);jQuery.extend(!0,this,s)},Create:function(r,u,f){var o=this._base.init(r,u),e,h,s,l,c;if(o==i||o==!1)return!1;for(e=o.getKey(),t("<div><\/div>").attr("id",n.cfgPrefixId.divLabelId+e).addClass("cssNestedLabel").appendTo("#"+f),t("<select><\/select>").attr("id",e).attr("name",e).css("float","left").appendTo("#"+f),h=o.getProperties(),s=0,l=h.length;s<l;s++){c=h[s].getId();switch(c){default:this._base.SetPropertieOfControl(c,h[s].getValue(),e,!0)}}return t("#"+e).css({width:parseInt(t("#"+f).css("width"))-parseInt(t("#"+n.cfgPrefixId.divLabelId+e).css("width"))-15+"px"}),o},CreateCat:function(n,t,r,u){var f=this._base.init(n,"c10"),s,o,e,h,c;if(f==i||f==!1)return!1;for(f.setControlId(r),s=f.getKey(),o=f.getProperties(),e=0,h=o.length;e<h;e++)c=o[e].getId(),this._base.SetPropertieOfControl(c,o[e].getValue(),s,!0);return f.setControlTitle(u),this.Add(f,t),f},Add:function(n,r){var e,f,h,c;if(n==i||n==!1)return!1;var u=n.getKey(),o=n.getTitleId(),l=n.getRequirementControl(),s=n.getControlTitle();for(l=="true"&&(s+='<span style="color: red;"> (*)<\/span>'),t("<div><\/div>").attr("id",o).addClass("cssNestedLabel").appendTo("#"+r).html(s),t("<select><\/select>").attr("id",u).attr("name",u).css("float","left").appendTo("#"+r),e=n.getProperties(),f=0,h=e.length;f<h;f++)c=e[f].getId(),this._base.SetPropertieOfControl(c,e[f].getValue(),u,!1);return t("#"+u).attr("disabled","disabled"),t("#"+u).css({width:parseInt(t("#"+r).css("width"))-parseInt(t("#"+o).css("width"))-15+"px"}),!0},Load:function(n,r){var o,e,f,a,h,s;if(n==i||n==!1)return!1;var u=n.getKey(),c=n.getTitleId(),v=n.getRequirementControl(),l=n.getControlTitle();for(v=="true"&&(l+='<span style="color: red;"> (*)<\/span>'),t("<div><\/div>").attr("id",c).addClass("cssNestedLabel").appendTo("#"+r).html(l),t("<select><\/select>").attr("id",u).attr("name",u).attr("data-bind","options:fformModel.catalog"+u+", optionsText:'catalogname',optionsValue:'catalogid', optionsCaption:' ', value:"+u+", event:{ change:"+u+"Validate }").css("float","left").appendTo("#"+r),o=!1,e=n.getProperties(),f=0,a=e.length;f<a;f++){h=e[f].getId();switch(h){case"p13":e[f].getValue()=="true"&&(o=!0);break;case"p14":if(!o)break;s=u+"_required";t("<span><\/span>").attr("id",s).attr("controlValidate",u).html(o?e[f].getValue()==""?"*":e[f].getValue():"").css({color:"red",display:"none","font-style":"italic"}).addClass("cssErr").insertAfter("#"+u);t("#"+u).change(function(){var n=jQuery.trim(t(this).find(":selected").text());n=n.replace("//","");n==""?t("#"+s).css({display:"inline"}):t("#"+s).css({display:"none"})});break;default:this._base.SetPropertieOfControl(h,e[f].getValue(),u,!1)}}return t("#"+u).css({width:parseInt(t("#"+r).css("width"))-parseInt(t("#"+c).css("width"))-15+"px"}),!0},View:function(n,r){var e,o,f,u,h,s;if(n==i||n==!1)return!1;for(e=n.getKey(),o=n.getTitleId(),t("<div><\/div>").attr("id",o).addClass("cssNestedLabel").appendTo("#"+r),t("<div><\/div>").attr("id",e).css({float:"left","padding-top":"3px","border-bottom":"dotted 1px gray","min-height":"15px"}).appendTo("#"+r),f=n.getProperties(),u=0,h=f.length;u<h;u++){s=f[u].getId();switch(s){case"p1":break;case"p17":f[u].getValue()!=""&&t("#"+o).html(f[u].getValue());break;case"p31":t("#"+e).html(f[u].getValue());break;default:this._base.SetPropertieOfControl(s,f[u].getValue(),e,!0)}}return t("#"+e).css({width:parseInt(t("#"+r).css("width"))-parseInt(t("#"+o).css("width"))-15+"px"}),!0},LoadProperty:function(i,r,u){var a=i.getKey(),f=r,e=n.cfgPrefixId.divPropertyId+f.getId(),s=n.propertylib[f.getId()],o,v,h,l,c;switch(f.getId()){case"p1":break;case"p13":for(t("<select><\/select>").attr("id",e).attr("name",e).appendTo("#"+u).change(function(){var r=i.getTitleId(),n=i.getControlTitle();t(this).val()=="true"?(t("#prop_p14").removeAttr("readonly"),n+='<span style="color: red;"> (*)<\/span>',t("#"+r).html(n)):(t("#"+a+"_required").html(""),t("#prop_p14").val("").attr("readonly","true"),n=n.replace('<span style="color: red;"> (*)<\/span>',""),t("#"+r).html(n));t(this).val()!=null&&i.setPropertyValue(f.getId(),t(this).val())}).trigger("change"),o=0,v=s.length;o<v;o++)s[o].getValue()==f.getValue()?t("<option />").attr("selected","selected").attr("value",s[o].getValue()).html(s[o].getUIValue()).appendTo("#"+e):t("<option />").attr("value",s[o].getValue()).html(s[o].getUIValue()).appendTo("#"+e);break;case"p14":h=!1;t("#prop_p13").val()=="true"&&(h=!0);l=i.getTitleId();c=i.getControlTitle();h?(c+='<span style="color: red;"> (*)<\/span>',t("#"+l).html(c)):(c=c.replace('<span style="color: red;"> (*)<\/span>',""),t("#"+l).html(c));t("<input/>").attr("id",e).attr("name",e).attr("type","text").attr(h?"txt":"readonly",h?"":"true").val(h?f.getValue():"").appendTo("#"+u).keyup(function(){t("#"+a+"_required").html(t(this).val());t(this).val()!=null&&i.setPropertyValue(f.getId(),t(this).val())}).trigger("keyup");break;case"p11":t("<br />").appendTo("#"+u);t("<textarea><\/textarea>").attr("id",e).attr("name",e).attr("readonly","true").attr("rows","5").css({width:"350px"}).val(f.getValue()).appendTo("#"+u);break;default:this._base.LoadProperties(i,r,u,!0)}}},v=s.constructor,h={constructor:function(){this._base=jQuery.extend(!0,this,new r);jQuery.extend(!0,this,h)},Create:function(n,t,r){var u=this._base.init(n,t),o,e,f,s,h;if(u==i||u==!1)return!1;for(o=n+"_new_",e=u.getProperties(),f=0,s=e.length;f<s;f++)h=e[f].getId(),this._base.SetPropertieOfControl(h,e[f].getValue(),o,!0);return u.setControlId(o),this.Add(u,r),u},CreateExtend:function(n,t,r,u){var f=this._base.init(n,"c9"),s,o,e,h,c;if(f==i||f==!1)return!1;for(f.setControlId(r),s=f.getKey(),o=f.getProperties(),e=0,h=o.length;e<h;e++)c=o[e].getId(),this._base.SetPropertieOfControl(c,o[e].getValue(),s,!0);return f.setControlTitle(u),this.Add(f,t),f},Add:function(n,r){var e,f,h,c;if(n==i||n==!1)return!1;var u=n.getKey(),o=n.getTitleId(),l=n.getRequirementControl(),s=n.getControlTitle();for(l=="true"&&(s+='<span style="color: red;"> (*)<\/span>'),t("<div><\/div>").attr("id",o).addClass("cssNestedLabel").appendTo("#"+r).html(s),t("<input />").attr("id",u).attr("name",u).attr("type","text").attr("readonly",!0).css("float","left").appendTo("#"+r),e=n.getProperties(),f=0,h=e.length;f<h;f++)c=e[f].getId(),this._base.SetPropertieOfControl(c,e[f].getValue(),u,!0);return t("#"+u).attr("readonly",!0),t("#"+u).css({width:parseInt(t("#"+r).css("width"))-parseInt(t("#"+o).css("width"))-15+"px"}),!0},Load:function(n,r){var a,v,o,e,f,y,h,s;if(n==i||n==!1)return!1;var u=n.getKey(),c=n.getTitleId(),p=n.getRequirementControl(),l=n.getControlTitle();for(p=="true"&&(l+='<span style="color: red;"> (*)<\/span>'),t("<div><\/div>").attr("id",c).addClass("cssNestedLabel").appendTo("#"+r).html(l),a=n.getControlMask(),t("<input />").attr("id",u).attr("name",u).attr("type","text").attr("data-bind","value:"+u+", event:{ change:"+u+"Validate }").attr("data-mask",a).addClass("ffield").css("float","left").appendTo("#"+r),v=n.getControlReadOnly(),v=="true"&&t("#"+u).attr("readonly","readonly"),t("<span />").attr("id",u+"Error").attr("name",u+"Error").attr("type","text").attr("class","cssErr").attr("controlValidate",u).attr("data-bind","visible:"+u+"Error, text: "+u+"Error, click:"+u+"DismissError").css("float","left").appendTo("#"+r),o=!1,e=n.getProperties(),f=0,y=e.length;f<y;f++){h=e[f].getId();switch(h){case"p13":e[f].getValue()=="true"&&(o=!0);break;case"p14":if(!o)break;s=u+"_required";t("<span><\/span>").attr("id",s).attr("controlValidate",u).html(o?e[f].getValue()==""?"*":e[f].getValue():"").css({color:"red",display:"none","font-style":"italic"}).addClass("cssErr").insertAfter("#"+u);t("#"+u).blur(function(){var n=t(this).val().replace(/_/g,"");n=n.replace("//","");n==""?t("#"+s).css({display:"inline"}):t("#"+s).css({display:"none"})});break;default:this._base.SetPropertieOfControl(h,e[f].getValue(),u,!0)}}return t("#"+u).css({width:parseInt(t("#"+r).css("width"))-parseInt(t("#"+c).css("width"))-15+"px"}),!0},View:function(r,u){var f,c,s,l,o,e,a,h;if(r==i||r==!1)return!1;for(f=r.getKey(),c=-1,s=0,l=r.getProperties().length;s<l;s++)if(r.getProperties()[s].getId()=="p1"){c=s;break}for(t("<div><\/div>").attr("id",n.cfgPrefixId.divLabelId+f).addClass("cssNestedLabel").appendTo("#"+u),t("<div><\/div>").attr("id",f).css({float:"left","padding-top":"3px","border-bottom":"dotted 1px gray","min-height":"15px"}).appendTo("#"+u),o=r.getProperties(),e=0,a=o.length;e<a;e++){h=o[e].getId();switch(h){case"p17":o[e].getValue()!=""&&t("#"+n.cfgPrefixId.divLabelId+f).html(o[e].getValue());break;default:this._base.SetPropertieOfControl(h,o[e].getValue(),f,!0)}}return t("#"+f).css({width:parseInt(t("#"+u).css("width"))-parseInt(t("#"+n.cfgPrefixId.divLabelId+f).css("width"))-15+"px"}),!0},LoadProperty:function(i,r,u){var a=i.getKey(),s=r,o=n.cfgPrefixId.divPropertyId+s.getId(),e=n.propertylib[s.getId()],h,v,c,f,l;switch(s.getId()){case"p13":for(t("<select><\/select>").attr("id",o).attr("name",o).appendTo("#"+u).change(function(){var r=i.getTitleId(),n=i.getControlTitle();t(this).val()=="true"?(t("#prop_p14").removeAttr("readonly"),n+='<span style="color: red;"> (*)<\/span>',t("#"+r).html(n)):(t("#"+a+"_required").html(""),t("#prop_p14").val("").attr("readonly","true"),n=n.replace('<span style="color: red;"> (*)<\/span>',""),t("#"+r).html(n));t(this).val()!=null&&i.setPropertyValue(s.getId(),t(this).val())}).trigger("change"),f=0,l=e.length;f<l;f++)e[f].getValue().toString()==s.getValue()?t("<option />").attr("selected","selected").attr("value",e[f].getValue()).html(e[f].getUIValue()).appendTo("#"+o):t("<option />").attr("value",e[f].getValue()).html(e[f].getUIValue()).appendTo("#"+o);break;case"p14":h=!1;t("#prop_p13").val()=="true"&&(h=!0);v=i.getTitleId();c=i.getControlTitle();h?(c+='<span style="color: red;"> (*)<\/span>',t("#"+v).html(c)):(c=c.replace('<span style="color: red;"> (*)<\/span>',""),t("#"+v).html(c));t("<input/>").attr("id",o).attr("name",o).attr("type","text").attr(h?"txt":"readonly",h?"":"true").val(h?s.getValue():"").appendTo("#"+u).keyup(function(){t("#"+a+"_required").html(t(this).val());t(this).val()!=null&&i.setPropertyValue(s.getId(),t(this).val())}).trigger("keyup");break;case"p19":for(t("<select><\/select>").attr("id",o).attr("name",o).appendTo("#"+u).change(function(){t(this).val()!=null&&(t("#p1prop").val(""),t("#"+a).val(""));t(this).val()!=null&&i.setPropertyValue(s.getId(),t(this).val())}).trigger("change"),f=0,l=e.length;f<l;f++)e[f].getValue()==s.getValue()?t("<option />").attr("selected","selected").attr("value",e[f].getValue()).html(e[f].getUIValue()).appendTo("#"+o):t("<option />").attr("value",e[f].getValue()).html(e[f].getUIValue()).appendTo("#"+o);break;default:this._base.LoadProperties(i,r,u,!0)}}},y=h.constructor,c={constructor:function(){this._base=jQuery.extend(!0,this,new r);jQuery.extend(!0,this,c)},Create:function(n,t,r){var u=this._base.init(n,t),f;return u==i||u==!1?!1:(f=n,u.setControlId(f),this.Add(u,r),u)},Add:function(n,r){var f,e,u,o,s;if(n==i||n==!1)return!1;for(f=n.getKey(),t("<div><\/div>").attr("id",f).css({width:"100%","padding-top":"3px"}).appendTo("#"+r),e=n.getProperties(),u=0,o=e.length;u<o;u++)s=e[u].getId(),this._base.SetPropertieOfControl(s,e[u].getValue(),f,!1);return t("#"+f).css({width:"100%"}),!0},Load:function(n,t){return this.Add(n,t)},View:function(n,t){return this.Add(n,t)},LoadProperty:function(i,r,u){var o=i.getKey(),f=r,e=n.cfgPrefixId.divPropertyId+f.getId();switch(f.getId()){case"p1":t("<br />").appendTo("#"+u);t("<textarea><\/textarea>").attr("id",e).attr("name",e).val(f.getValue()).attr("rows","7").css({width:"280px"}).appendTo("#"+u).keyup(function(){t("#"+o).html(t(this).val().replace(/\n/g,"<br>"));t(this).val()!=null&&i.setPropertyValue(f.getId(),t(this).val())}).trigger("keyup");break;default:this._base.LoadProperties(i,r,u,!1)}}},p=c.constructor;n.PropertyEntity=function(n,t,i,r,u,f,e){var o=new l;return o.init(n,t,i,r,u,f,e),o};n.ControlEntity=function(t,i,r,u,e){var o=new f,h,l,c,s,a,v;for(o.init(t,i),o.setPosRow(r),o.setPosOrder(u),h=0,l=e.length;h<l;h++)o.AddProperty(new n.PropertyEntity("p"+e[h].Id,e[h].Value));for(c=n.getPropertyByControlType(i),s=0,a=c.length;s<a;s++)v=o.getProperty(c[s].getId()),v||o.AddProperty(new n.PropertyEntity(c[s].getId(),c[s].getValue()));return o};n.CreateFormObject=function(n){var t;switch(n){case"c1":t=new p;break;case"c9":t=new y;break;case"c10":t=new v;break;default:t=new r}return t}.bind(this);n.setMask=function(){t.datepicker.setDefaults(t.datepicker.regional.vi);t('input.ffield[data-mask="integer"]').setMask();t('input.ffield[data-mask="decimal"]').setMask();t('input.ffield[data-mask="monthyear"]').mask("99/9999");t('input.ffield[data-mask="year"]').mask("9999");t('input.ffield[data-mask="datetime"]').mask("99/99/9999");t('input.ffield[data-mask="datetime"]').datepicker({changeMonth:!0,changeYear:!0})}.bind(this)})(window.eForm=window.eForm||{},jQuery);