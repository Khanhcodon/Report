define(["jquery","qtip",],function(n){"use strict";if(typeof n!="function")throw"Trang chưa có Jquery";var p=".shortkey",w="#SearchQuery",ut=".bell",b=".tab-focus",c="tab-focus",u=[{object:"#menu-document",children:["li"],isLevel:!0,isVerticalAlign:!0,isClickWhenFocus:!0},{object:"#ulTabs",children:["li"],isClickWhenFocus:!0},{object:"table.table-main",children:["th"],isTableHeader:!0},{object:".grid-content",children:["tr"],isVerticalAlign:!0,isDocuments:!0,isClickWhenFocus:!0}],i=0,t,r=0,o,s=!1,ot=function(n){parent.helper.displayApp(n)},st=function(){t.length==1&&t.click()},ht=function(){parent.focusToMainSearch()},l=!1,ct=function(){l&&(n(p).qtip("hide"),l=!1)},lt=function(){l||(l=!0,n(p).qtip("show"))},at=function(){var n=window.parent.$(ut);n.hasClass("open")?n.removeClass("open"):n.addClass("open")},vt=function(){egov.views.home.tree.showFirstNodeInDocumentTree()},yt=function(){egov.views.home.documents.selectFirstDocumentInList()},pt=function(n){n.preventDefault()},wt=function(){n(w).show();n(w).focus()},bt=function(){},kt=function(){},dt=function(){parent.openOptionPanel()},gt=function(){egov.home.tab.addReport()},ni=function(){egov.views.home.tab.activeTab(0)},ti=function(n){egov.views.home.tab.activeTab(n)},ii=function(n){var r=u[i];r.isDocuments||(n.target!==document.body?n.target.click():t&&(t.click(),t.children("a:first").click(),t.find("input[type=checkbox]").click()))},ri=function(){var n=u[i];n.isDocuments&&egov.views.home.documents.selectAll()},e=function(){t.is("input")&&t.focus();n(b).removeClass(c);t.addClass(c);u[i].isClickWhenFocus&&t.click()},h=function(){s=!1;t&&t.qtip("hide")},e=function(){t.is("input")&&t.focus();n(b).removeClass(c);t.addClass(c);u[i].isClickWhenFocus&&t.click()},v=function(n){var r=u[i].children[n],t;return r==undefined?{object:undefined}:(t={},typeof r=="object"?t=r:(t.object=r,t.isTip=!1),t)},ft=function(){var n=t.children("a").children("span.menu-icon");n.hasClass("closed")?n.click():n.parent("a").hasClass("collapsed")&&n.click()},et=function(){var n=t.children("a").children("span.menu-icon");n.hasClass("open")?n.click():n.parent("a").hasClass("collapsed")||n.hasClass("closed")||n.click()},st=function(){t.length==1&&t.click()},k=function(){var h,l,o,c,s;if(i==u.length-1?i=0:i++,h=u[i],h.isMultiTab?(l=t.find("a").attr("href"),t=n(l).find("ul.toolbar").children("li").first()):(r=0,t=f(i,r).first()),o=t.parents("div#documentList").children("[data-key=tblListDocument]"),o.length>0){for(c=0,s=0;s<o.length;s++)if(o.eq(s).css("display")=="none"&&(c=h.children[0]=="tr"?c+o.eq(s).find(h.children[0]).length-1:c+o.eq(s).find(h.children[0]).length),o.eq(s).css("display")!="none")break;t=f(i,r).eq(c)}e()},y=function(){var h,s,n,o;for(i!=0&&i--,h=u[i],r=u[i].children.length-1,t=f(i,r).last(),s=t.parents("div").children("[data-key=tblListDocument]"),n=0,o=0;o<s.length;o++)s.eq(o).css("display")=="none"&&(n=h.children[0]=="tr"?n+s.eq(o).find(h.children[0]).length-1:n+s.eq(o).find(h.children[0]).length);n!==0&&(t=f(i,r).eq(n));e()},f=function(t,i){return n(u[t].object+" "+v(i).object)},d=function(){nt(o);e()},g=function(){tt(o);e()},nt=function(r){for(var o,s,e,f=0;f<r.length;f++)if(n(r[f]).is(t)){for(f==r.length-1?t=n(r[0]):(o=u[i],t=o.isVerticalAlign&&t.children("ul").length>0&&!t.children("ul").hasClass("in")&&!t.children("ul").hasClass("open")?n(r[f+t.children("ul").find("li").length+1]):!o.isVerticalAlign&&t.children("ul").length>0&&!t.children("ul").hasClass("open")&&!t.children("ul").hasClass("in")?n(r[f+t.children("ul").find("li").length+1]):n(r[f+1])),t.length===0&&a(),s=t.parents(),e=s.length-1;e>=0;e--)if(s.eq(e).css("display")=="none"){a();break}return}t=r.first()},tt=function(r){for(var h,f,e,o=0;o<r.length;o++)if(n(r[o]).is(t)){if(o!=0)if(h=u[i],h.isLevel){var f=n(r[o-1]).parents("ul"),c=f.eq(f.length),s=0;if(f.length>0)for(e=f.length-2;e>=0;e--)if(!f.eq(e).hasClass("in")){s=s+f.eq(e).find("li").length;break}t=n(r[o-1-s])}else t=n(r[o-1]);for(f=t.parents(),e=f.length-1;e>=0;e--)if(f.eq(e).css("display")=="none"){y();break}return}t=r.last()},a=function(){t==undefined?(t=f(0,0).first(),i=0,r=0,e()):(h(),k())},ui=function(){h();var n=u[i];n.isVerticalAlign?n.isLevel&&ft():it()},fi=function(){h();var n=u[i];n.isVerticalAlign?n.isLevel&&et():rt()},ei=function(){var l=u[i],e=v(r),f,c;if(l.isVerticalAlign){rt();return}if(e.isTip){if(s){g();return}if(f=t.attr("data-hasqtip"),f!=undefined){c=n("#qtip-"+f);c.is(":visible")&&!s?t.qtip("hide"):(o!=undefined&&(o=n(e.tipElement)),g());return}}h();y()},oi=function(){var l=u[i],e=v(r),f,c;if(l.isVerticalAlign){it();return}if(e.isTip){if(s){d();return}if(f=t.attr("data-hasqtip"),f!=undefined){c=n("#qtip-"+f);c.is(":visible")?(o=n(e.tipElement),s=!0,d()):t.qtip("show");return}}t!==undefined?(h(),k()):a()},it=function(){if(i!=undefined&&r!=undefined){var n=f(i,r);t&&(t.is(n.last())?r!==u[i].children.length-1?(r++,t=f(i,r).first()):a():nt(n),e())}},rt=function(){if(i!=undefined&&r!=undefined){var n=f(i,r);t&&(t.is(n.first())?r!==0?(r--,t=f(i,r).last()):y():tt(n),e())}}});