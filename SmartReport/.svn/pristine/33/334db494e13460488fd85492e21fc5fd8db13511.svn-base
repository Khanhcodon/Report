(function(){"use strict";if(btalk.model=btalk.model||{},btalk.model.chatter!==!0){btalk.model.chatter=!0;var t=Backbone.Model.extend({lastmsg:null,messageCaches:null,defaults:{jid:"",fulljid:"",account:"",type:"chat",lasttimestamp:null,lastmessage:"",lastmessageid:null,isme:!1,unread:!1,unreadcount:0,isselected:!1,fullname:"",isAtTop:!1,online:!1,rosterUser:null,roster:null,isResultOfSearch:!1,lastTypedText:"",archiveIsLoaded:!1,statusHeightChatter:"default",isSeenLastMessage:!1,muteNotification:!1,collectionShareImage:[],collectionShareFile:[],statusIdle:!1},read:function(n){if(n&&typeof n=="boolean")this.set({unread:!n}),!n==!0?this.set({unreadcount:this.get("unreadcount")+1}):this.set({unreadcount:0});else return!this.get("unread")},unread:function(n){if(n&&typeof n=="boolean")this.set({unread:n}),n==!0?this.set({unreadcount:this.get("unreadcount")+1}):this.set({unreadcount:0});else return this.get("unread")},unreadcount:function(){return this.get("unreadcount")},lastmessage:function(n){if(n)n=n.length<=100?n:n.substr(0,100),this.set({lastmessage:n});else return this.get("lastmessage")},lasttimestamp:function(n){if(n)this.set({lasttimestamp:n});else return this.get("lasttimestamp")},isAtTop:function(n){if(n)this.set({isAtTop:n});else return this.get("isAtTop")}}),r=Backbone.Collection.extend({model:t,first:0,index:0,last:0,count:0,comparator:"lasttimestamp",read:function(){return this.where({unread:!1})},unread:function(){return this.where({unread:!0})},counts:function(){return this.where({isResultOfSearch:!1}).length},selectedTop:function(){this.length>0&&this.models[this.length-1].set({isselected:!0})}}),u=Backbone.Model.extend({defaults:{textloading:"Đang tải...",state:2},startLoading:function(){this.set({state:2,textloading:"Đang tải..."})},stopLoading:function(){this.set({state:1,textloading:""})},hidden:function(){this.set({state:0,textloading:""})}}),n=Backbone.Model.extend({defaults:{jid:"",label:"",account:"",online:!1,messagecount:0,chatter:null,rosterUser:null,type:"",key:""}}),f=Backbone.Collection.extend({model:n,comparator:"messagecount"}),i=Backbone.Model.extend({attachments:null,defaults:{account:"[Chưa có thông tin]",mobile:"[Chưa có thông tin]",jobtitles:"[Chưa có thông tin]",departments:"[Chưa có thông tin]",online:!1,statusmessage:"[Chưa có thông tin]",members:[],type:""}}),e=Backbone.Collection.extend({model:i}),o=Backbone.Collection.extend({model:n}),s=new r,h=new u,c=new f;btalk.model=$.extend(btalk.model,{Chatter:t,ChatterSearch:n,ChatterInfo:i,MemberCollection:e,FriendCollection:o});btalk=$.extend(btalk,{CHATTERS:s,CHATTERNEXT:h,CHATTERSEARCH:c})}})();