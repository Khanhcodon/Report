INSERT INTO `tree_group` VALUES (NULL, 'Tình trạng xử lý khảo sát', b'0', b'1', '2020-07-15 16:18:14', 'egovadmin@yenbai.gov.vn', NULL, NULL, 12, b'1', b'1', b'1', b'0', b'0');

INSERT INTO `processfunction` VALUES (NULL, NULL, NULL, 'Xem danh sách các bài khảo sát đã định nghĩa', NULL, NULL, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue, \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` in (2, 16)\r\nAND `d`.`StatusReport` = 2\r\nAND `d`.CategoryBusinessId = 32\r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.`DateReceived` >= @toDate\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as DateOverdue , \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.`StatusReport` = 2\r\nAND `d`.CategoryBusinessId in (32) \r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` not in (2, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nOR `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.`StatusReport` = 2\r\nAND `d`.CategoryBusinessId in (32)\r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4);', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.`StatusReport` = 2\r\nAND `d`.CategoryBusinessId in (32)\r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', NULL, b'1', b'1', 0, NULL, NULL, b'0', b'0', 0, '2020-07-31', 1, b'0', b'0',  (SELECT TreeGroupId FROM tree_group WHERE TreeGroupName = 'Tình trạng xử lý khảo sát'), NULL, b'0', NULL, 1, 0);
INSERT INTO `processfunction` VALUES (NULL, NULL, NULL, 'Xem danh sách các bài khảo sát đã phê duyệt', NULL, NULL, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue, \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` in (2, 16)\r\nAND `d`.`StatusReport` = 4\r\nAND `d`.CategoryBusinessId = 32\r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.`DateReceived` >= @toDate\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as DateOverdue , \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.`StatusReport` = 4\r\nAND `d`.CategoryBusinessId in (32) \r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` not in (2, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nOR `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.`StatusReport` = 4\r\nAND `d`.CategoryBusinessId in (32)\r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4);', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.`StatusReport` = 4\r\nAND `d`.CategoryBusinessId in (32)\r\nAND `dc`.UserNguoiThamGia LIKE CONCAT(\'%\',@userId,\'%\')\r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', NULL, b'1', b'1', 0, NULL, NULL, b'0', b'0', 0, '2020-07-31', 1, b'0', b'0',  (SELECT TreeGroupId FROM tree_group WHERE TreeGroupName = 'Tình trạng xử lý khảo sát'), NULL, b'0', NULL, 1, 0);
INSERT INTO `processfunction` VALUES (NULL, NULL, NULL, 'Xem danh sách các bài khảo sát đã thực hiện khảo sát', NULL, NULL, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue, \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status` in (2, 16)\r\nAND `d`.CategoryBusinessId in (32) \r\nAND (`dc`.`UserCurrentId` = @userId \r\nOR `dc`.`UserGiamsat` LIKE CONCAT(\'%\',@userId,\'%\')) \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as DateOverdue , \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId in (32) \r\nAND (`dc`.`UserCurrentId` = @userId \r\nOR `dc`.`UserGiamsat` LIKE CONCAT(\'%\',@userId,\'%\')) \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` not in (4, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nOR `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId in (32) \r\nAND (`dc`.`UserCurrentId` = @userId \r\nOR `dc`.`UserGiamsat` LIKE CONCAT(\'%\',@userId,\'%\'))  \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4);', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId in (32) \r\nAND (`dc`.`UserCurrentId` = @userId \r\nOR `dc`.`UserGiamsat` LIKE CONCAT(\'%\',@userId,\'%\')) \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', NULL, b'1', b'1', 0, NULL, NULL, b'0', b'0', 0, '2020-07-31', 1, b'0', b'0',  (SELECT TreeGroupId FROM tree_group WHERE TreeGroupName = 'Tình trạng xử lý khảo sát'), NULL, b'0', NULL, 1, 0);
INSERT INTO `processfunction` VALUES (NULL, NULL, NULL, 'Xem danh sách các bài khảo sát chưa thực hiện khảo sát', NULL, NULL, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue, \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` in (2, 16)\r\nAND `d`.CategoryBusinessId in (32) \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND `dc`.`ParentId` IS NOT NULL\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as DateOverdue , \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId in (32) \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND `dc`.`ParentId` IS NOT NULL\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` not in (2, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nOR `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId in (32)\r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND `dc`.`ParentId` IS NOT NULL;', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId in (32)\r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND `dc`.`ParentId` IS NOT NULL\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', NULL, b'1', b'1', 0, NULL, NULL, b'0', b'0', 0, '2020-07-31', 1, b'0', b'0',  (SELECT TreeGroupId FROM tree_group WHERE TreeGroupName = 'Tình trạng xử lý khảo sát'), NULL, b'0', NULL, 1, 0);
