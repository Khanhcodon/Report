/*
Navicat MySQL Data Transfer

Source Server         : localhost
Source Server Version : 50540
Source Host           : localhost:3306
Source Database       : egovls_tnmt

Target Server Type    : MYSQL
Target Server Version : 50540
File Encoding         : 65001

Date: 2017-07-14 14:29:53
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `processfunction`
-- ----------------------------
DROP TABLE IF EXISTS `processfunction`;
CREATE TABLE `processfunction` (
  `ProcessFunctionId` int(11) NOT NULL AUTO_INCREMENT,
  `ParentId` int(11) DEFAULT NULL,
  `ProcessFunctionTypeId` int(11) DEFAULT NULL,
  `Name` varchar(128) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Tên chức năng',
  `Icon` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `Color` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `QueryLatest` text COLLATE utf8_unicode_ci COMMENT 'Câu query khi click vào',
  `QueryOlder` text COLLATE utf8_unicode_ci,
  `QueryItemRemove` text COLLATE utf8_unicode_ci,
  `QueryCountAllItems` text COLLATE utf8_unicode_ci,
  `QueryCountItemUnread` text COLLATE utf8_unicode_ci,
  `QueryPaging` text COLLATE utf8_unicode_ci,
  `IsEnablePaging` bit(1) NOT NULL,
  `IsActivated` bit(1) NOT NULL COMMENT 'Trạng thái sử dụng',
  `Order` int(11) NOT NULL,
  `DateFilter` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `DateFilterView` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `IsOverdueFilter` bit(1) NOT NULL,
  `IsDateFilter` bit(1) NOT NULL,
  `Type` int(11) DEFAULT '0',
  `DateModified` date NOT NULL,
  `ShowTotalInTreeType` tinyint(4) DEFAULT '1',
  `HasUyQuyen` bit(1) DEFAULT b'0',
  `HasTransferTheoLo` bit(1) DEFAULT b'0',
  `TreeGroupId` int(11) NOT NULL,
  `ExportFileConfig` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  `HasExportFile` bit(1) DEFAULT b'0',
  `QueryExportDataToFile` text COLLATE utf8_unicode_ci,
  `DocColumnSettingId` int(11) DEFAULT NULL,
  `PermissionSettingId` int(11) DEFAULT NULL,
  PRIMARY KEY (`ProcessFunctionId`),
  KEY `FK_ProcessFunctionParentId_ProcessFunctionId` (`ParentId`) USING BTREE,
  KEY `FK_ProcessFunction_ProcessFunctionTypeId` (`ProcessFunctionTypeId`) USING BTREE,
  CONSTRAINT `processfunction_ibfk_1` FOREIGN KEY (`ProcessFunctionTypeId`) REFERENCES `processfunctiontype` (`ProcessFunctionTypeId`)
) ENGINE=InnoDB AUTO_INCREMENT=260 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Records of processfunction
-- ----------------------------
INSERT INTO `processfunction` VALUES ('13', null, null, 'Văn bản đang dự thảo', null, null, 'SELECT d.Status, `d`.`Compendium`, \r\n		`d`.`Compendium2`,`d`.`DateCreated`,`d`.`DocTypeId`, `d`.`CategoryBusinessId`, `d`.`DocCode`, `d`.`InOutCode`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, \r\n	1 as `IsViewed`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus` ,`dc`.UserCurrentId  ,`dc`.`WorkflowId`, `dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DateReceived` >= @toDate AND d.CategoryBusinessId != 4\r\n ORDER BY `dc`.`DateReceived` DESC', '-- Văn bản đang dự thảo mặc định lấy ra tất cả\r\nSELECT \r\n	d.Status, `d`.`Compendium`, \r\n		`d`.`Compendium2`,`d`.`DateCreated`,`d`.`DocTypeId`, `d`.`CategoryBusinessId`, `d`.`DocCode`, `d`.`InOutCode`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, \r\n	1 as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId,  `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 1 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	AND d.CategoryBusinessId != 4\r\n	ORDER BY `dc`.`DateReceived` DESC', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy` as dc\r\nWHERE  \r\n(`Status` != 1 or  `dc`.`UserCurrentId` <> @userId )\r\nAND `DocumentCopyId` IN ({0})', 'SELECT COUNT(1) FROM `documentcopy` as `dc`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId ', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId , `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '3', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '6', '1');
INSERT INTO `processfunction` VALUES ('32', null, null, 'Văn bản mới kết thúc', null, null, 'SELECT \r\n	`d`.`Compendium`,  \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`d`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`,\r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`dc`.`DocumentCopyId`, \r\n	`d`.`CategoryId`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.WorkflowId , \r\n	`dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	`dc`.UserCurrentId , \r\n	1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nLEFT JOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` = 4\r\n	AND d.CategoryBusinessId != 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND `dc`.`DateReceived` >= @toDate  	\r\nORDER BY `DateReceived1` DESC;', '\r\nSELECT \r\n	`d`.`Compendium`,  \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`d`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`,\r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`dc`.`DocumentCopyId`, \r\n	`d`.`CategoryId`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.WorkflowId , \r\n	`dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	`dc`.UserCurrentId , \r\n	1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nLEFT JOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` = 4\r\n	AND d.CategoryBusinessId != 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nORDER BY `DateReceived1` DESC\r\nLIMIT 200;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy`\r\nWHERE  `UserCurrentId` != @userId And `Status` != 4\r\nAND `DocumentCopyId` IN ({0})', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\nWHERE `dc`.`Status` = 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\');', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nWHERE `dc`.`Status` = 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	and if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.`Compendium`, `d`.`DateCreated`,`d`.`DocTypeId`,`d`.`CategoryBusinessId`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`,d.DocCode, `d`.`CategoryId`,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`,`dc`.UserCurrentId\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 4  AND d.CategoryBusinessId != 4    AND `df`.`UserId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '7', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('33', null, null, 'Văn bản được ủy quyền xử lý', null, null, 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\n\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) AND d.CategoryBusinessId != 4 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0} )     \r\n		AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId \r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n    and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId  AND d.CategoryBusinessId != 4 \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd`  AND `au`.`AuthorizeUserId` in ({0} ) \r\n     ORDER BY `DateReceived1` DESC LIMIT 0,100;', 'SELECT   `DocumentCopyId`  \r\n FROM `documentcopy` as `dc`\r\nINNER JOIN  `authorize` as `au`  ON `dc`.`UserCurrentId` = `au`.`AuthorizeUserId` \r\nWHERE\r\n(`au`.`AuthorizeUserId` not  in ({0}) OR (`au`.`AuthorizeUserId` in ({0})  AND dc.`Status` != 2))\r\n AND dc.`DocumentCopyId` IN ({1})', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n    and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId  AND d.CategoryBusinessId != 4 \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd`  AND `au`.`AuthorizeUserId` in ({0} ) ;', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, \r\n`dc`.`DocumentCopyId`,`dc`.`DocumentCopyType`, \r\n`dc`.`Status`  as`DocCopyStatus`,`dc`.UserCurrentId , \r\n`df`.`IsViewed`,`df`.`IsDocumentImportant` \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`  AND `dc`.UserCurrentId = `df`.UserId \r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `df`.UserId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nand (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND `au`.`AuthorizeUserId` in ({0} ) \r\n      AND `dc`.`DateReceived` <= @fromDate \r\n     AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)\r\n    ORDER BY `dc`.`DateReceived` DESC\r\n     LIMIT @skip,@take', '', '', '8', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('34', null, null, 'Văn bản ủy quyền vừa xử lý', null, null, 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on dc.UserNguoiThamGia LIKE CONCAT(\'%;\',`au`.AuthorizeUserId,\';%\') AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId != `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) \r\n		 AND d.CategoryBusinessId != 4 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0})     \r\n		 AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on dc.UserNguoiThamGia LIKE CONCAT(\'%;\',`au`.AuthorizeUserId,\';%\') AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId != `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) \r\n		 AND d.CategoryBusinessId != 4 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0})     \r\nORDER BY `dc`.`DateReceived` DESC limit 100;', 'SELECT  `DocumentCopyId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN  `authorize` as `au`   ON `dc`.`UserCurrentId` = `au`.`AuthorizeUserId` \r\nWHERE  `au`.`AuthorizeUserId`  not  in ({0} ) AND `au`.`Active` = 1  AND `d`.DateCreated <= `au`.`DateBegin`    AND `d`.DateCreated >= `au`.`DateEnd`\r\n AND dc.`DocumentCopyId` IN ({1})', 'SELECT \r\n	Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on dc.UserNguoiThamGia LIKE CONCAT(\'%;\',`au`.AuthorizeUserId,\';%\') AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId != `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) \r\n		 AND d.CategoryBusinessId != 4 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0})     \r\nORDER BY `dc`.`DateReceived` DESC limit 100;', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, \r\n`df`.`IsViewed`,`dc`.`DocumentCopyType`,\r\n `dc`.Status  as`DocCopyStatus`,\r\n`dc`.UserCurrentId , `dc`.`DocumentCopyId`,`df`.`IsDocumentImportant` \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` \r\nINNER JOIN `authorize` au on au.AuthorizeUserId = df.UserId\r\nWHERE\r\n   `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n    and  `au`.`AuthorizeUserId` in ({0} ) \r\n		AND `au`.`Active` = 1\r\n    AND NOW() >= `au`.`DateBegin`\r\n    AND NOW() <= `au`.`DateEnd`\r\nAND `d`.DateCreated >= `au`.`DateBegin`\r\n    AND `d`.DateCreated <= `au`.`DateEnd`\r\n    and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n		and (dc.UserCurrentId != au.AuthorizeUserId or (dc.UserCurrentId = au.AuthorizeUserId AND dc.`Status` = 4))\r\n		AND `dc`.`DateReceived` >= @toDate \r\n		AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)\r\n ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '9', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('139', null, null, 'Hồ sơ cá nhân', null, null, 'INNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId ', 'INNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` ', ' SELECT\r\n	`DocumentCopyId`\r\nFROM\r\n	`documentcopy`\r\nWHERE\r\n	`UserCurrentId` != @userId\r\nAND `DocumentCopyId` IN ({0})', 'AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)', null, 'WHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  ', '', '', '0', null, null, '', '', '1', '0000-00-00', '1', '', '', '4', null, '', null, '163', '1');
INSERT INTO `processfunction` VALUES ('140', null, null, 'Hồ sơ chia sẻ', null, null, 'WHERE `dc`.`Status` = 2 AND `d`.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DateReceived` >= @toDate AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)', 'INNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` ', 'SELECT\r\n	`DocumentCopyId`\r\nFROM\r\n	`documentcopy`\r\nWHERE\r\n	`UserCurrentId` != @userId\r\nAND `DocumentCopyId` IN ({0})', 'SELECT Count(1) FROM `document` as `d` INNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` INNER JOIN `storeprivate_documentcopy` as `sdc` ON `dc`.`DocumentCopyId` = `sdc`.`DocumentCopyId` INNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` INNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId', 'SELECT Count(1) FROM `document` as `d` INNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` INNER JOIN `storeprivate_documentcopy` as `sdc` ON `dc`.`DocumentCopyId` = `sdc`.`DocumentCopyId` INNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` INNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId WHERE `df`.`IsViewed` = 0', 'ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '1', '0000-00-00', '1', '', '', '4', null, '', null, '162', '1');
INSERT INTO `processfunction` VALUES ('158', null, null, 'Hồ sơ vừa tiếp nhận', null, null, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, 	\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , \r\n	fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, \r\n	GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n	GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed` , 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả \r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, 1 as hasUpdateViewed\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` != 2\r\nOR `dc`.HasJustCreated != 1\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-12', '3', '', '', '3', '{\"FunctionId\":158,\"FileName\":\"eb090303be7f40118fefed648b2f2e45\",\"DateCreated\":\"2016-01-06T17:13:59.8020547+07:00\",\"FileLocationId\":5,\"IdentityFolder\":\"0\",\"FileLocationKey\":\"E:\\\\eGovUploadFile\\\\Attach\",\"RealFileName\":\"ExportToFile.rpt\"}', '', 'SELECT \r\n	d.DocCode, \r\n	d.CitizenName, \r\n	d.DateCreated, \r\n	d.DateAppointed, \r\n	DATEDIFF(d.DateAppointed, d.DateCreated) as RemainTime\r\nFROM document d\r\nINNER JOIN documentcopy dc on dc.DocumentId = d.DocumentId\r\nWHERE dc.DocumentCopyId in (#docCopyIds)', '174', '1');
INSERT INTO `processfunction` VALUES ('159', '188', null, 'Hồ sơ chờ bổ sung', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	`dc`.WorkflowId , `dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , \r\n	fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` , 1 as hasUpdateViewed \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,\r\n	`dc`.Status as`DocCopyStatus`, `dc`.WorkflowId , `dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` NOT IN (2, 16)\r\nOR d.`Status` != 16\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsGettingOut = 1\r\nAND d.IsSupplemented is NULL\r\nOR (1024 & dc.NodeCurrentPermission) = 1024 \r\nOR (512 & dc.NodeCurrentPermission) != 512 \r\nOR (2048 & dc.NodeCurrentPermission) = 2048\r\nOR d.IsReturned = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-12', '3', '', '', '3', null, '', null, '175', '1');
INSERT INTO `processfunction` VALUES ('160', null, null, 'Hồ sơ đang theo dõi', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` = @userId OR dc.`Status` NOT IN (2, 16) OR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4);', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '3', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '176', '1');
INSERT INTO `processfunction` VALUES ('161', null, null, 'Hồ sơ đã trả kết quả', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE d.IsReturned = 1\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\nif(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE \r\nd.IsReturned = 1\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC\r\nLimit 150;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nJOIN `document` d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(d.IsReturned IS NULL OR d.IsReturned = 0\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE \r\nd.IsReturned = 1\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4);', 'SELECT COUNT(1) FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE d.IsReturned = 1\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '4', null, null, '', '', '0', '2017-05-12', '1', '', '', '3', null, '', null, '177', '1');
INSERT INTO `processfunction` VALUES ('175', null, null, 'Hồ sơ đã kết thúc', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue`\r\n	,DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId` , 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status` = 4\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue`\r\n,DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId` , 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status` = 4\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC\r\nLimit 150;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n(dc.`Status` != 4\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1)\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status` = 4\r\nAND `d`.CategoryBusinessId = 4 \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 4\r\nAND `d`.`Status` = 4\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', null, '', '', '5', null, null, '', '', '0', '2017-05-12', '0', '', '', '3', null, '', null, '197', '1');
INSERT INTO `processfunction` VALUES ('179', '188', null, 'Hồ sơ chờ trả kết quả', null, null, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC\r\n', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` NOT IN (2, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsGettingOut = 1\r\nOR (1024 & dc.NodeCurrentPermission) = 1024 \r\nOR (512 & dc.NodeCurrentPermission) = 512 \r\nOR (2048 & dc.NodeCurrentPermission) != 2048\r\nOR d.IsReturned = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});\r\n', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '2', null, null, '', '', '0', '2017-05-12', '3', '', '', '3', null, '', null, '201', '1');
INSERT INTO `processfunction` VALUES ('180', null, null, 'Văn bản đến chờ xử lý', null, null, 'SELECT `d`.*, `dc`.`DocumentCopyId`, `dc`.`DateReceived`, \r\n	1 as `IsViewed`\r\nFROM `document` as `d` \r\nJOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`CategoryBusinessId` = 1 \r\nAND `d`.DocTypeId is NULL\r\nAND `dc`.`DateReceived` >= @toDate\r\nAND `dc`.`UserCurrentId` = @userId\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT `d`.*, `dc`.`DocumentCopyId`, `dc`.`DateReceived`, \r\n	1 as `IsViewed`\r\nFROM `document` as `d` \r\nJOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`CategoryBusinessId` = 1 \r\nAND `d`.DocTypeId is NULL\r\nAND `dc`.`UserCurrentId` = @userId\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT `dc`.DocumentCopyId\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE (`dc`.`Status` != 2 \r\nOr `d`.`CategoryBusinessId` != 1 \r\nOr `d`.DocTypeId is not NULL\r\nOr `dc`.`UserCurrentId` != @userId)\r\nAND `dc`.`DocumentCopyId` IN ({0})', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`CategoryBusinessId` = 1 \r\nAND `d`.DocTypeId is NULL\r\nAND `dc`.`UserCurrentId` = @userId', 'SELECT COUNT(1) FROM `document` as `d` INNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` WHERE `dc`.`Status` = 2 AND `d`.`CategoryBusinessId` = 1 AND `dc`.`UserCurrentId` = @userId', null, '', '', '10', null, null, '', '', '0', '2017-05-23', '1', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('181', null, null, 'Hồ sơ đang dự thảo', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus` ,`dc`.UserCurrentId  ,`dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 1 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	AND d.CategoryBusinessId = 4\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản đang dự thảo mặc định lấy ra tất cả\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId,  `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 4\r\n ORDER BY `dc`.`DateReceived` DESC;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy` as dc\r\nWHERE ( dc.`Status` != 1 or  `dc`.`UserCurrentId` <> @userId )\r\nAND dc.`DocumentCopyId` IN ({0})', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId;', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\nWHERE `dc`.`Status` = 1 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	AND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId , `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '2', null, null, '', '', '0', '2017-01-11', '1', '', '', '3', null, '', null, '246', '1');
INSERT INTO `processfunction` VALUES ('182', '160', null, 'Hồ sơ đang thụ lý', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , \r\n	fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;\r\n', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` = @userId \r\nOR dc.`Status` NOT IN (2)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsSuccess is NOT NULL\r\nOR d.IsSupplemented is NOT NULL\r\nOR d.IsGettingOut = 1\r\nOR (1024 & dc.NodeCurrentPermission) = 1024 \r\nOR (2048 & dc.NodeCurrentPermission) = 2048)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '248', '1');
INSERT INTO `processfunction` VALUES ('183', '160', null, 'Hồ sơ chờ trả kết quả', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;\r\n', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM `documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` = @userId \r\nOR dc.`Status` NOT IN (2, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsGettingOut = 1\r\nOR (1024 & dc.NodeCurrentPermission) = 1024 \r\nOR (512 & dc.NodeCurrentPermission) = 512 \r\nOR (2048 & dc.NodeCurrentPermission) != 2048\r\nOR d.IsReturned = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` IN (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) != 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) = 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '249', '1');
INSERT INTO `processfunction` VALUES ('184', '160', null, 'Hồ sơ chờ bổ sung', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	  if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;\r\n', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` = @userId \r\nOR dc.`Status` NOT IN (2, 16)\r\nOR d.`Status` != 16\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsGettingOut = 1\r\nAND d.IsSupplemented is NULL\r\nOR (1024 & dc.NodeCurrentPermission) = 1024 \r\nOR (512 & dc.NodeCurrentPermission) != 512 \r\nOR (2048 & dc.NodeCurrentPermission) = 2048\r\nOR d.IsReturned = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});\r\n', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);\r\n', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` IN (2, 16)\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSupplemented is NOT NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (512 & dc.NodeCurrentPermission) = 512\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '2', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '250', '1');
INSERT INTO `processfunction` VALUES ('185', '160', null, 'Hồ sơ đang trình ký', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` = @userId \r\nOR dc.`Status` != 2\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsSuccess is NOT NULL\r\nOR d.IsSupplemented is NOT NULL\r\nOR d.IsGettingOut = 1\r\nOR (512 & dc.NodeCurrentPermission) = 512 \r\nOR (1024 & dc.NodeCurrentPermission) != 1024 \r\nOR (2048 & dc.NodeCurrentPermission) = 2048)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;', 'SELECT COUNT(1) FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '3', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '251', '1');
INSERT INTO `processfunction` VALUES ('186', '160', null, 'Hồ sơ đang liên thông', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , \r\n	fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 16\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsGettingOut = 1\r\nAND (2 & dc.NodeCurrentPermission) = 2\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 16\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsGettingOut = 1\r\nAND (2 & dc.NodeCurrentPermission) = 2\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` = @userId \r\nOR dc.`Status` != 16\r\nOR d.`Status` != 16\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (2 & dc.NodeCurrentPermission) != 2\r\nOR d.IsReturned = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 16\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsGettingOut = 1\r\nAND (2 & dc.NodeCurrentPermission) = 2\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 16\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` != @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nAND d.IsGettingOut = 1\r\nAND (2 & dc.NodeCurrentPermission) = 2\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '4', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '252', '1');
INSERT INTO `processfunction` VALUES ('187', '188', null, 'Hồ sơ chờ duyệt', null, null, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, \r\n	`dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue , \r\n	DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue`, \r\n	DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue , \r\nDATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue`, \r\nDATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nORDER BY `dc`.`DateReceived` DESC;\r\n', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` != 2\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsSuccess is NOT NULL\r\nOR d.IsSupplemented is NOT NULL\r\nOR d.IsGettingOut = 1\r\nOR (512 & dc.NodeCurrentPermission) = 512 \r\nOR (1024 & dc.NodeCurrentPermission) != 1024 \r\nOR (2048 & dc.NodeCurrentPermission) = 2048)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\n\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) = 1024 \r\nAND (512 & dc.NodeCurrentPermission) != 512 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;\r\n', null, '', '', '1', null, null, '', '', '0', '2017-05-12', '3', '', '', '3', null, '', null, '253', '1');
INSERT INTO `processfunction` VALUES ('188', null, null, 'Hồ sơ chờ xử lý', null, null, 'SELECT `d`.*, \r\n	`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n	1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue, \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` in (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,\r\n1 as `DocFinishType`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as DateOverdue , \r\nGetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`, 1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` not in (2, 16)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4))\r\nOR `dc`.HasJustCreated = 1\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4);', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status`  in (2, 16)\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', null, '', '', '1', null, null, '', '', '0', '2017-05-12', '3', '', '', '3', '{\"FunctionId\":188,\"FileName\":\"87d294dc030043078a2b12467654faba\",\"DateCreated\":\"2015-11-14T14:50:48.7323092+07:00\",\"FileLocationId\":5,\"IdentityFolder\":\"0\",\"FileLocationKey\":\"E:\\\\eGovUploadFile\\\\Attach\",\"RealFileName\":\"DocumentsToFile.rpt\"}', '', null, '254', '1');
INSERT INTO `processfunction` VALUES ('189', '158', '3', 'Lọc theo lĩnh vực', null, null, 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue , \r\nDATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue`, \r\nDATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.`DocumentCopyType` = 1\r\nAND `dc`.HasJustCreated = 1\r\nAND (d.IsGettingOut IS NULL OR d.IsGettingOut = 0)\r\nAND d.DocFieldId = @docfieldid\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT `d`.*, \r\n`dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId ,  dc.DateOverdue , \r\nDATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue`, \r\nDATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` = 1\r\nAND `dc`.HasJustCreated = 1\r\nAND (d.IsGettingOut IS NULL OR d.IsGettingOut = 0)\r\nAND d.DocFieldId = @docfieldid\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE (`dc`.`Status` != 2 \r\nOR `d`.`Status` != 2\r\nOR `d`.CategoryBusinessId != 4 \r\nOR `dc`.`UserCurrentId` != @userId \r\nOR `dc`.`DocumentCopyType` != 1\r\nOR `dc`.HasJustCreated = 1\r\nOR d.IsGettingOut = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` = 1\r\nAND `dc`.HasJustCreated = 1\r\nAND (d.IsGettingOut IS NULL OR d.IsGettingOut = 0)\r\nAND d.DocFieldId = @docfieldid\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` = 1\r\nAND `dc`.HasJustCreated = 1\r\nAND (d.IsGettingOut IS NULL OR d.IsGettingOut = 0)\r\nAND d.DocFieldId = @docfieldid\r\nAND df.IsViewed = 0', null, '', '', '0', null, null, '', '', '0', '2016-05-09', '1', '', '', '3', null, '', null, '255', '1');
INSERT INTO `processfunction` VALUES ('190', '188', null, 'Hồ sơ chờ thụ lý', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, 1 as hasUpdateViewed FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;\r\n', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` NOT IN (2)\r\nOR `dc`.`DocumentCopyType` NOT IN (1, 2, 4)\r\nOR d.IsSuccess is NOT NULL\r\nOR d.IsSupplemented is NOT NULL\r\nOR d.IsGettingOut = 1\r\nOR (1024 & dc.NodeCurrentPermission) = 1024 \r\nOR (2048 & dc.NodeCurrentPermission) = 2048)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048;', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 2\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` in (1, 2, 4)\r\nAND d.IsSuccess is NULL\r\nAND d.IsSupplemented is NULL\r\nAND (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nAND (1024 & dc.NodeCurrentPermission) != 1024 \r\nAND (2048 & dc.NodeCurrentPermission) != 2048\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '3', null, null, '', '', '0', '2017-05-12', '3', '', '', '3', null, '', null, '256', '1');
INSERT INTO `processfunction` VALUES ('192', null, null, 'Hồ sơ đang liên thông', null, null, 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , \r\n	fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, \r\n	GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n	GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed` \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DateReceived` >= @toDate \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` = 64\r\nAND d.IsGettingOut = 1\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nORDER BY `dc`.`DateReceived` DESC', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả @fromDate @take\r\nSELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, \r\nif(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color`, GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\nGetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` = 64\r\nAND d.IsGettingOut = 1\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);', 'SELECT\r\n	dc.`DocumentCopyId`\r\nFROM\r\n	`documentcopy` dc\r\nINNER JOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE\r\n	(`dc`.`UserCurrentId` != @userId \r\nOR dc.`Status` != 2\r\nOR d.`Status` != 16\r\nOR `dc`.`DocumentCopyType` != 64\r\nOR (d.IsGettingOut is NULL OR d.IsGettingOut = 0)\r\nOR d.IsReturned = 1)\r\nAND `dc`.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` = 64 \r\nAND d.IsGettingOut = 1\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0);\r\n', 'SELECT COUNT(1) FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2\r\nAND `d`.`Status` = 16\r\nAND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.HasJustCreated != 1\r\nAND `dc`.`DocumentCopyType` = 64\r\nAND d.IsGettingOut = 1\r\nAND (d.IsReturned is NULL OR d.IsReturned = 0)\r\nAND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , fnGetDocumentColor(`d`.`UrgentId`,`d`.`DateAppointed`, `d`.`DateResponsed`, `d`.`DateResponsedOverdue`, `dc`.`DateOverdue`, `dc`.`DocumentCopyType`, `dc`.Status) AS `Color` FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-01-11', '3', '', '', '3', null, '', null, '178', '1');
INSERT INTO `processfunction` VALUES ('221', null, null, 'Văn bản đang theo dõi', null, null, 'SELECT  \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE (`dc`.`Status` = 2 OR `dc`.`Status` = 16) \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND d.CategoryBusinessId != 4 \r\n	AND `dc`.`UserCurrentId` != @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	ORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId \r\nORDER BY `DateReceived1` DESC LIMIT 300;', 'SELECT `dc`.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nWHERE (`dc`.`Status` not in (2, 16) or `dc`.`UserCurrentId` = @userId)\r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId\r\nORDER BY `DateReceived` DESC;', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId\r\nand if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,  `dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`, `u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId  FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE (`dc`.`Status` = 2 OR `dc`.`Status` = 16) AND `df`.`UserId` = @userId AND `dc`.`UserCurrentId` != @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `DateReceived` DESC LIMIT @skip ,@take', '', '', '2', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '165', '1');
INSERT INTO `processfunction` VALUES ('222', null, null, 'Văn bản chờ xử lý ', null, null, 'SELECT \r\n		`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\n	AND `d`.CategoryBusinessId != 4 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n		`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4  AND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nORDER BY `DateReceived1` DESC LIMIT 300;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE \r\n	( dc.`UserCurrentId` != @userId OR dc.`Status` != 2)\r\n	AND dc.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) FROM `documentcopy` as `dc`\r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nWHERE \r\n	`dc`.`Status` = 2 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	and if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0\r\n	AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-06-24', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('223', null, null, 'Văn bản thông báo', null, null, 'SELECT \r\n	`d`.`Status`, \r\n	`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`, \r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.`DocumentCopyId`,\r\n	`dc`.UserCurrentId ,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	1 as hasUpdateViewed,\r\n	1 as isThongBao\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE \r\n	`dc`.`Status` not in (1, 8) \r\n	AND d.CategoryBusinessId != 4 \r\n	AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\') \r\n	AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n	`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`, \r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.`DocumentCopyId`,\r\n	`dc`.UserCurrentId ,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	1 as hasUpdateViewed,\r\n	1 as isThongBao\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` not in (1, 8) \r\n	AND d.CategoryBusinessId != 4 \r\n	AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')\r\nORDER BY `DateReceived1` DESC \r\nLIMIT 0, 100;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy`as dc\r\nWHERE \r\n	`dc`.`Status` not in (1, 8) \r\n	and dc.UserThongBao NOT LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND `DocumentCopyId` IN ({0})', 'SELECT COUNT(1)\r\nFROM `documentcopy` as `dc`\r\nWHERE \r\n		`dc`.`Status` not in (1, 8) \r\n		AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` = @userId ', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\nWHERE \r\n		`dc`.`Status` not in (1, 8) \r\n		AND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0\r\n		AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId` ,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.`UserCurrentId` = `df`.`UserId`\r\nWHERE `dc`.`Status` != 4 AND `dc`.`DocumentCopyType` = 8 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '3', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('229', '13', null, 'Văn bản đến', null, null, 'SELECT d.Status, `d`.`Compendium`, \r\n		`d`.`Compendium2`,`d`.`DateCreated`,`d`.`DocTypeId`, `d`.`CategoryBusinessId`, `d`.`DocCode`, `d`.`InOutCode`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus` ,`dc`.UserCurrentId  ,`dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DateReceived` >= @toDate AND d.CategoryBusinessId = 1\r\n ORDER BY `dc`.`DateReceived` DESC', '-- Văn bản đang dự thảo mặc định lấy ra tất cả\r\nSELECT d.Status, `d`.`Compendium`,\r\n		`d`.`Compendium2`, `d`.`DateCreated`,`d`.`DocTypeId`, `d`.`CategoryBusinessId`, `d`.`DocCode`, `d`.`InOutCode`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId,  `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\n\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 1\r\n ORDER BY `dc`.`DateReceived` DESC', 'SELECT  `DocumentCopyId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE  \r\n(d.`Status` != 1 or  `dc`.`UserCurrentId` <> @userId )\r\nAND dc.`DocumentCopyId` IN ({0}) AND d.CategoryBusinessId != 1', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 1', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId , `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '6', '1');
INSERT INTO `processfunction` VALUES ('230', '13', null, 'Văn bản đi', null, null, 'SELECT d.Status, `d`.`Compendium`, \r\n		`d`.`Compendium2`,`d`.`DateCreated`,`d`.`DocTypeId`, `d`.`CategoryBusinessId`, `d`.`DocCode`, `d`.`InOutCode`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus` ,`dc`.UserCurrentId  ,`dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DateReceived` >= @toDate AND d.CategoryBusinessId = 2\r\n ORDER BY `dc`.`DateReceived` DESC', '-- Văn bản đang dự thảo mặc định lấy ra tất cả\r\nSELECT d.Status, `d`.`Compendium`, \r\n		`d`.`Compendium2`,`d`.`DateCreated`,`d`.`DocTypeId`, `d`.`CategoryBusinessId`, `d`.`DocCode`, `d`.`InOutCode`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId,  `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\n\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 2\r\n ORDER BY `dc`.`DateReceived` DESC', 'SELECT  `DocumentCopyId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE  \r\n(d.`Status` != 1 or  `dc`.`UserCurrentId` <> @userId )\r\nAND dc.`DocumentCopyId` IN ({0}) AND d.CategoryBusinessId != 2', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 2', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId , `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 1 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '6', '1');
INSERT INTO `processfunction` VALUES ('240', '222', null, 'Văn bản đến', null, null, 'SELECT \r\n		`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\n	AND `d`.CategoryBusinessId = 1 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n		`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId  = 1  AND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nORDER BY `DateReceived1` DESC LIMIT 300;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE ( dc.`UserCurrentId` != @userId OR dc.`Status` != 2)\r\n	AND dc.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nJoin document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) and d.CategoryBusinessId  = 1', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nJoin document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n	`dc`.`Status` = 2 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	and if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0\r\n	AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nand d.CategoryBusinessId  = 1\r\n\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-06-24', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('241', '222', null, 'Văn bản đi', null, null, 'SELECT \r\n		`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\n	AND `d`.CategoryBusinessId = 2 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n		`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId  = 2  AND `dc`.`UserCurrentId` = @userId \r\nAND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nORDER BY `DateReceived1` DESC LIMIT 300;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE ( dc.`UserCurrentId` != @userId OR dc.`Status` != 2)\r\n	AND dc.`DocumentCopyId` IN ({0});', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nJoin document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` = 2 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) and d.CategoryBusinessId  = 2', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\nJoin document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n	`dc`.`Status` = 2 \r\n	AND `dc`.`UserCurrentId` = @userId \r\n	and if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0\r\n	AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nand d.CategoryBusinessId  = 2\r\n\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-06-24', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('242', '221', null, 'Văn bản đến', null, null, 'SELECT  \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE (`dc`.`Status` = 2 OR `dc`.`Status` = 16) \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND d.CategoryBusinessId = 1 \r\n	AND `dc`.`UserCurrentId` != @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	ORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId  = 1 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId \r\nORDER BY `DateReceived1` DESC LIMIT 300;', 'SELECT `dc`.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nWHERE (`dc`.`Status` not in (2, 16) or `dc`.`UserCurrentId` = @userId)\r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`DocumentCopyId` IN ({0}) and d.CategoryBusinessId != 1  ;', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId  = 1 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId\r\nORDER BY `DateReceived` DESC;', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId  = 1 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId\r\nand if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,  `dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`, `u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId  FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE (`dc`.`Status` = 2 OR `dc`.`Status` = 16) AND `df`.`UserId` = @userId AND `dc`.`UserCurrentId` != @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `DateReceived` DESC LIMIT @skip ,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '165', '1');
INSERT INTO `processfunction` VALUES ('243', '221', null, 'Văn bản đi', null, null, 'SELECT  \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE (`dc`.`Status` = 2 OR `dc`.`Status` = 16) \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND d.CategoryBusinessId = 2 \r\n	AND `dc`.`UserCurrentId` != @userId \r\n	AND `dc`.`DateReceived` >= @toDate \r\n	ORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId  = 2 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId \r\nORDER BY `DateReceived1` DESC LIMIT 300;', 'SELECT `dc`.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nWHERE (`dc`.`Status` not in (2, 16) or `dc`.`UserCurrentId` = @userId)\r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`DocumentCopyId` IN ({0}) and d.CategoryBusinessId != 2  ;', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId  = 2 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId\r\nORDER BY `DateReceived` DESC;', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId  = 2 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` != @userId\r\nand if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,  `dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`, `u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId  FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE (`dc`.`Status` = 2 OR `dc`.`Status` = 16) AND `df`.`UserId` = @userId AND `dc`.`UserCurrentId` != @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `DateReceived` DESC LIMIT @skip ,@take', '', '', '1', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '165', '1');
INSERT INTO `processfunction` VALUES ('244', '223', null, 'Văn bản đến', null, null, 'SELECT \r\n	`d`.`Status`, \r\n	`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`, \r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.`DocumentCopyId`,\r\n	`dc`.UserCurrentId ,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	1 as hasUpdateViewed,\r\n	1 as isThongBao\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE \r\n	`dc`.`Status` not in (1, 8) \r\n	AND d.CategoryBusinessId = 1 \r\n	AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\') \r\n	AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n	`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`, \r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.`DocumentCopyId`,\r\n	`dc`.UserCurrentId ,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	1 as hasUpdateViewed,\r\n	1 as isThongBao\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` not in (1, 8) \r\n	AND d.CategoryBusinessId = 1 \r\n	AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')\r\nORDER BY `DateReceived1` DESC \r\nLIMIT 0, 100;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy`as dc\r\nJoin document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n	`dc`.`Status` not in (1, 8) \r\n	and dc.UserThongBao NOT LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND `DocumentCopyId` IN ({0}) AND d.CategoryBusinessId != 1 ;', 'SELECT COUNT(1)\r\nFROM `documentcopy` as `dc`\r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n		`dc`.`Status` not in (1, 8) \r\n		AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 1', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\nJoin Document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n		`dc`.`Status` not in (1, 8) \r\n		AND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0\r\n		AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\') AND d.CategoryBusinessId = 1 ', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId` ,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.`UserCurrentId` = `df`.`UserId`\r\nWHERE `dc`.`Status` != 4 AND `dc`.`DocumentCopyType` = 8 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('245', '223', null, 'Văn bản đi', null, null, 'SELECT \r\n	`d`.`Status`, \r\n	`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`, \r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.`DocumentCopyId`,\r\n	`dc`.UserCurrentId ,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	1 as hasUpdateViewed,\r\n	1 as isThongBao\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE \r\n	`dc`.`Status` not in (1, 8) \r\n	AND d.CategoryBusinessId = 2 \r\n	AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\') \r\n	AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n	`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`, \r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.`DocumentCopyId`,\r\n	`dc`.UserCurrentId ,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	1 as hasUpdateViewed,\r\n	1 as isThongBao\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` not in (1, 8) \r\n	AND d.CategoryBusinessId = 2 \r\n	AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')\r\nORDER BY `DateReceived1` DESC \r\nLIMIT 0, 100;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy`as dc\r\nJoin document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n	`dc`.`Status` not in (1, 8) \r\n	and dc.UserThongBao NOT LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND `DocumentCopyId` IN ({0}) AND d.CategoryBusinessId != 2 ;', 'SELECT COUNT(1)\r\nFROM `documentcopy` as `dc`\r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n		`dc`.`Status` not in (1, 8) \r\n		AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND `dc`.`UserCurrentId` = @userId AND d.CategoryBusinessId = 2', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\nJoin Document d on d.DocumentId = dc.DocumentId\r\nWHERE \r\n		`dc`.`Status` not in (1, 8) \r\n		AND if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0\r\n		AND dc.UserThongBao LIKE CONCAT(\'%;\',@userId,\';%\') AND d.CategoryBusinessId = 2 ', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId` ,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.UserCurrentId \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.`UserCurrentId` = `df`.`UserId`\r\nWHERE `dc`.`Status` != 4 AND `dc`.`DocumentCopyType` = 8 AND `dc`.`UserCurrentId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) ORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('246', '32', null, 'Văn bản đến', null, null, 'SELECT \r\n	`d`.`Compendium`,  \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`d`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`,\r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`dc`.`DocumentCopyId`, \r\n	`d`.`CategoryId`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.WorkflowId , \r\n	`dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	`dc`.UserCurrentId , \r\n	1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nLEFT JOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` = 4\r\n	AND d.CategoryBusinessId = 1 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND `dc`.`DateReceived` >= @toDate  	\r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Compendium`,  \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`d`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`,\r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`dc`.`DocumentCopyId`, \r\n	`d`.`CategoryId`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.WorkflowId , \r\n	`dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	`dc`.UserCurrentId , \r\n	1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nLEFT JOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` = 4\r\n	AND d.CategoryBusinessId = 1\r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nORDER BY `DateReceived1` DESC\r\nLIMIT 200;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy`\r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE  `UserCurrentId` != @userId And `Status` != 4\r\nAND `DocumentCopyId` IN ({0}) and d.CategoryBusinessId != 1 ', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` = 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\') AND d.CategoryBusinessId = 1;', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` = 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	and if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0  and d.CategoryBusinessId = 1 ;', 'SELECT `d`.`Compendium`, `d`.`DateCreated`,`d`.`DocTypeId`,`d`.`CategoryBusinessId`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`,d.DocCode, `d`.`CategoryId`,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`,`dc`.UserCurrentId\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 4  AND d.CategoryBusinessId != 4    AND `df`.`UserId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('247', '32', null, 'Văn bản đi', null, null, 'SELECT \r\n	`d`.`Compendium`,  \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`d`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`,\r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`dc`.`DocumentCopyId`, \r\n	`d`.`CategoryId`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.WorkflowId , \r\n	`dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	`dc`.UserCurrentId , \r\n	1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nLEFT JOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` = 4\r\n	AND d.CategoryBusinessId = 2 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	AND `dc`.`DateReceived` >= @toDate  	\r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Compendium`,  \r\n		`d`.`Compendium2`,\r\n	DATE_FORMAT(`d`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n	`d`.`DocTypeId`,\r\n	`d`.`CategoryBusinessId`, \r\n	`d`.`DocCode`, \r\n	`d`.`InOutCode`, \r\n	DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n	`dc`.`DocumentCopyId`, \r\n	`d`.`CategoryId`,\r\n	if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n	`dc`.`DocumentCopyType`, \r\n	`dc`.`Status` as`DocCopyStatus`, \r\n	`u`.FullName as UserCurrentFullName,\r\n	`dc`.WorkflowId , \r\n	`dc`.NodeCurrentId ,\r\n	1 as `DocFinishType`,\r\n	`dc`.UserCurrentId , \r\n	1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nLEFT JOIN `user` u on u.UserId = d.UserCreatedId\r\nWHERE `dc`.`Status` = 4\r\n	AND d.CategoryBusinessId = 2\r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\nORDER BY `DateReceived1` DESC\r\nLIMIT 200;', 'SELECT  `DocumentCopyId`\r\nFROM  `documentcopy`\r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE  `UserCurrentId` != @userId And `Status` != 4\r\nAND `DocumentCopyId` IN ({0}) and d.CategoryBusinessId != 2 ', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc` \r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` = 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\') AND d.CategoryBusinessId = 2;', 'SELECT COUNT(1) \r\nFROM `documentcopy` as `dc`\r\njoin document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` = 4 \r\n	AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n	and if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0  and d.CategoryBusinessId = 2 ;', 'SELECT `d`.`Compendium`, `d`.`DateCreated`,`d`.`DocTypeId`,`d`.`CategoryBusinessId`, `dc`.`DateReceived`, `dc`.`DocumentCopyId`,d.DocCode, `d`.`CategoryId`,`df`.`IsViewed`,`df`.`IsDocumentImportant`,`dc`.`DocumentCopyType`, `dc`.Status  as`DocCopyStatus`,`dc`.WorkflowId , `dc`.NodeCurrentId ,`df`.`DocFinishType`,`dc`.UserCurrentId\r\n FROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`\r\nWHERE `dc`.`Status` = 4  AND d.CategoryBusinessId != 4    AND `df`.`UserId` = @userId AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch) \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-05-31', '1', '', '', '1', null, '', null, '28', '1');
INSERT INTO `processfunction` VALUES ('248', '33', null, 'Văn bản đến', null, null, 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nJOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) AND d.CategoryBusinessId = 1 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0})     \r\n		 AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId \r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n    and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId  AND d.CategoryBusinessId = 1 \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd`  AND `au`.`AuthorizeUserId` in ({0} ) \r\n     ORDER BY `DateReceived1` DESC LIMIT 0,100;', 'SELECT   `DocumentCopyId`  \r\n FROM `documentcopy` as `dc`\r\nINNER JOIN  `authorize` as `au`  ON `dc`.`UserCurrentId` = `au`.`AuthorizeUserId` \r\nWHERE\r\n(`au`.`AuthorizeUserId` not  in ({0}) OR (`au`.`AuthorizeUserId` in ({0})  AND dc.`Status` != 2))\r\n AND dc.`DocumentCopyId` IN ({1})', 'SELECT \r\n	Count(1)\r\nFROM `document` as `d` \r\nJOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) AND d.CategoryBusinessId = 1 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0})     \r\nORDER BY `dc`.`DateReceived` DESC;', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, \r\n`dc`.`DocumentCopyId`,`dc`.`DocumentCopyType`, \r\n`dc`.`Status`  as`DocCopyStatus`,`dc`.UserCurrentId , \r\n`df`.`IsViewed`,`df`.`IsDocumentImportant` \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`  AND `dc`.UserCurrentId = `df`.UserId \r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `df`.UserId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nand (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND `au`.`AuthorizeUserId` in ({0} ) \r\n      AND `dc`.`DateReceived` <= @fromDate \r\n     AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)\r\n    ORDER BY `dc`.`DateReceived` DESC\r\n     LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('249', '33', null, 'Văn bản đi', null, null, 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\n\r\nJOIN `user` u on u.UserId = dc.UserCurrentId\r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n   and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16) AND d.CategoryBusinessId = 2 \r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND  `au`.`AuthorizeUserId` in ({0} )     \r\n		AND `dc`.`DateReceived` >= @toDate \r\nORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		0 as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nJOIN `user` u on u.UserId = dc.UserCurrentId \r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n    and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId  AND d.CategoryBusinessId = 2 \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd`  AND `au`.`AuthorizeUserId` in ({0} ) \r\n     ORDER BY `DateReceived1` DESC LIMIT 0,100;', 'SELECT   `DocumentCopyId`  \r\n FROM `documentcopy` as `dc`\r\nINNER JOIN  `authorize` as `au`  ON `dc`.`UserCurrentId` = `au`.`AuthorizeUserId` \r\nWHERE\r\n(`au`.`AuthorizeUserId` not  in ({0}) OR (`au`.`AuthorizeUserId` in ({0})  AND dc.`Status` != 2))\r\n AND dc.`DocumentCopyId` IN ({1})', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `dc`.UserCurrentId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\n    and (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId  AND d.CategoryBusinessId = 2 \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd`  AND `au`.`AuthorizeUserId` in ({0} ) ;', 'SELECT 0;', 'SELECT `d`.*, `dc`.`DateReceived`, \r\n`dc`.`DocumentCopyId`,`dc`.`DocumentCopyType`, \r\n`dc`.`Status`  as`DocCopyStatus`,`dc`.UserCurrentId , \r\n`df`.`IsViewed`,`df`.`IsDocumentImportant` \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId`  AND `dc`.UserCurrentId = `df`.UserId \r\nINNER JOIN `authorize` as `au` on `au`.AuthorizeUserId = `df`.UserId AND `au`.`Active` = 1\r\nWHERE  `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64)\r\nand (`au`.`DocTypeId` IS NULL OR `au`.`DocTypeId` =\'\' or  `au`.DocTypeId  like CONCAT(\'%\', `d`.`DocTypeId`,\'%\'))\r\n     and `dc`.UserCurrentId = `au`.AuthorizeUserId \r\n	   and `dc`.`Status` IN (2, 16)\r\n		 AND NOW() >= `au`.`DateBegin` \r\n		 AND NOW() <= `au`.`DateEnd` \r\n		 AND `au`.`AuthorizeUserId` in ({0} ) \r\n      AND `dc`.`DateReceived` <= @fromDate \r\n     AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)\r\n    ORDER BY `dc`.`DateReceived` DESC\r\n     LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('250', null, null, 'Văn bản toàn cơ quan', null, null, 'SELECT \r\n`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND `d`.CategoryBusinessId != 4 \r\nAND `dc`.`DocumentCopyType` =1\r\nand d.DocCode is not null and d.DocCode != \'\' \r\n-- AND @toDate = @toDate \r\nORDER BY `DateReceived1` DESC\r\nlimit 50;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId != 4\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `DateReceived1` DESC Limit 0, 200;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE dc.`DocumentCopyId` IN ({0}) or `d`.CategoryBusinessId != 4\r\nor d.DocCode is null or d.DocCode = \'\' \r\n', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId != 4\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `dc`.`DateReceived` DESC Limit 0, 200;', 'Select 0;\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '192');
INSERT INTO `processfunction` VALUES ('252', '250', null, 'Văn bản đến', null, null, 'SELECT \r\n`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND `d`.CategoryBusinessId = 1 \r\nAND `dc`.`DocumentCopyType` =1\r\nand d.DocCode is not null and d.DocCode != \'\' \r\n-- AND @toDate = @toDate \r\nORDER BY `DateReceived1` DESC\r\nlimit 50;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId = 1\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `DateReceived1` DESC Limit 0, 200;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE dc.`DocumentCopyId` IN ({0}) or `d`.CategoryBusinessId != 1\r\nor d.DocCode is null or d.DocCode = \'\' \r\n', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId  = 1\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `dc`.`DateReceived` DESC Limit 0, 200;', 'Select 0;\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '192');
INSERT INTO `processfunction` VALUES ('253', '250', null, 'Văn bản đi', null, null, 'SELECT \r\n`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND `d`.CategoryBusinessId = 2 \r\nAND `dc`.`DocumentCopyType` =1\r\nand d.DocCode is not null and d.DocCode != \'\' \r\n-- AND @toDate = @toDate \r\nORDER BY `DateReceived1` DESC\r\nlimit 50;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId = 2\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `DateReceived1` DESC Limit 0, 200;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE dc.`DocumentCopyId` IN ({0}) or `d`.CategoryBusinessId != 2\r\nor d.DocCode is null or d.DocCode = \'\' \r\n', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId  = 2\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `dc`.`DateReceived` DESC Limit 0, 200;', 'Select 0;\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '1', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '192');
INSERT INTO `processfunction` VALUES ('256', null, null, 'Hồ sơ toàn cơ quan', null, null, 'SELECT \r\n`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 AND `d`.CategoryBusinessId = 4 \r\nAND `dc`.`DocumentCopyType` =1\r\nand d.DocCode is not null and d.DocCode != \'\' \r\n-- AND @toDate = @toDate \r\nORDER BY `DateReceived1` DESC\r\nlimit 50;', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		1 as hasUpdateViewed\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId = 4\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `DateReceived1` DESC Limit 0, 200;', 'SELECT dc.`DocumentCopyId`\r\nFROM `documentcopy` as `dc`\r\nJoin `document` as `d` on dc.DocumentId = d.DocumentId\r\nWHERE dc.`DocumentCopyId` IN ({0}) or `d`.CategoryBusinessId != 4\r\nor d.DocCode is null or d.DocCode = \'\' \r\n', '-- Văn bản chờ xử lý mặc định là lấy ra tất cả\r\nSELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nWHERE `dc`.`Status` = 2 \r\nAND d.CategoryBusinessId = 4\r\nAND `dc`.`DocumentCopyType` =1 \r\nand d.DocCode is not null and d.DocCode != \'\' \r\nORDER BY `dc`.`DateReceived` DESC Limit 0, 200;', 'Select 0;\r\n', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-07-14', '3', '', '', '3', null, '', null, '254', '192');
INSERT INTO `processfunction` VALUES ('258', null, null, 'Văn bản chờ phát hành', null, null, 'SELECT  \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND ((64 & dc.NodeCurrentPermission = 64) OR (128 & dc.NodeCurrentPermission = 128))\r\n	AND `dc`.`DateReceived` >= @toDate \r\n	ORDER BY `DateReceived1` DESC;', 'SELECT \r\n	`d`.`Status`, \r\n		`d`.`Compendium`, \r\n		`d`.`Compendium2`,\r\n		DATE_FORMAT(`dc`.`DateCreated`, \'%m/%d/%Y\') as `DateCreated`,\r\n		`d`.`DocTypeId`, \r\n		`d`.`CategoryBusinessId`,  \r\n		`d`.`DocCode`, \r\n		`d`.`InOutCode`,\r\n		`d`.`CategoryId`, `d`.`DocumentId`, \r\n		DATE_FORMAT(`dc`.`DateReceived`, \'%m/%d/%Y\') as `DateReceived`,\r\n		`dc`.`DateReceived` as `DateReceived1`,\r\n		`d`.`IsReturned`, `d`.`IsGettingOut`, `d`.`DateAppointed`, `d`.`IsSuccess`, `d`.`UrgentId`, `d`.`IsSupplemented`, \r\n		`dc`.`DocumentCopyId` as DocumentCopyId, \r\n		`dc`.`LastComment` as `LastComment`,\r\n		`dc`.`DocumentCopyType`,\r\n		`dc`.`Status` as`DocCopyStatus`,\r\n		1 as `DocFinishType`,\r\n		if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) as `IsViewed`,\r\n		`u`.`FullName` as `UserCurrentFullName`, \r\n		`u`.`FirstName` as `UserCurrentFirstName`,\r\n		`dc`.UserCurrentId ,  \r\n		dc.DateOverdue , \r\n		GetDayDocumentProcess_new(dc.DateOverdue, d.Status, d.IsSuccess, d.IsReturned) as `NumberDayOverdue`, \r\n		GetDayDocumentProcess_new(d.DateAppointed, d.Status, d.IsSuccess, d.IsReturned) as  `NumberDayAppointed`, \r\n		`dc`.`WorkflowId`, \r\n		`dc`.`NodeCurrentId`, \r\n		0 as hasUpdateViewed	\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nINNER JOIN `user` as `u` ON `dc`.`UserCurrentId` = `u`.`UserId` \r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND ((64 & dc.NodeCurrentPermission = 64) OR (128 & dc.NodeCurrentPermission = 128))\r\nORDER BY `DateReceived1` DESC  \r\nLIMIT 300;', 'SELECT `dc`.`DocumentCopyId`\r\nFROM `documentcopy` as `dc` \r\nJOIN document d on d.DocumentId = dc.DocumentId\r\nWHERE `dc`.`Status` NOT IN (2, 16)\r\n		AND d.CategoryBusinessId = 4\r\n		AND dc.UserNguoiThamGia NOT LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND (64 & dc.NodeCurrentPermission != 64) \r\n		AND (128 & dc.NodeCurrentPermission = 128)\r\n		AND `dc`.`DocumentCopyId` IN ({0});', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND ((64 & dc.NodeCurrentPermission = 64) OR (128 & dc.NodeCurrentPermission = 128));', 'SELECT Count(1)\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` in (2, 16)\r\n		AND d.CategoryBusinessId != 4 \r\n		AND dc.UserNguoiThamGia LIKE CONCAT(\'%;\',@userId,\';%\')\r\n		AND ((64 & dc.NodeCurrentPermission = 64) OR (128 & dc.NodeCurrentPermission = 128))\r\nand if(INSTR(dc.UserNguoiDaXem, CONCAT(\';\',@userId,\';\')) > 0, 1, 0) = 0', 'SELECT `d`.*, `dc`.`DateReceived`, `dc`.`DocumentCopyId`, `dc`.`LastComment` as `LastComment`,`dc`.`DocumentCopyType`,`dc`.Status as`DocCopyStatus`,`df`.`DocFinishType`, `df`.`IsViewed`,`df`.`IsDocumentImportant`,`u`.`FullName` as `UserCurrentFullName`, `u`.`FirstName` as `UserCurrentFirstName`,`dc`.UserCurrentId , DATEDIFF(Now(),dc.DateOverdue) AS `NumberDayOverdue` , DATEDIFF(Now(),d.DateAppointed) AS `NumberDayAppointed`, `dc`.`WorkflowId`, `dc`.`NodeCurrentId`\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nINNER JOIN `user` as `u` ON `d`.`UserCreatedId` = `u`.`UserId` \r\nINNER JOIN `docfinish` as `df` ON `dc`.`DocumentCopyId` = `df`.`DocumentCopyId` AND `dc`.UserCurrentId = `df`.UserId \r\nWHERE `dc`.`Status` = 2 AND d.CategoryBusinessId != 4 AND `dc`.`UserCurrentId` = @userId AND `dc`.`DocumentCopyType` in (1, 2, 4, 32, 64) AND (@quicksearch = \'\' OR `Compendium` LIKE @quicksearch)  \r\nORDER BY `dc`.`DateReceived` DESC LIMIT @skip,@take', '', '', '0', null, null, '', '', '0', '2017-05-31', '3', '', '', '1', null, '', null, '1', '1');
INSERT INTO `processfunction` VALUES ('259', null, null, 'Hồ sơ đến chờ xử lý', null, null, 'SELECT `d`.*, `dc`.`DocumentCopyId`, `dc`.`DateReceived`, \r\n	1 as `IsViewed`\r\nFROM `document` as `d` \r\nJOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`CategoryBusinessId` = 4 \r\nAND `d`.DocTypeId is NULL\r\nAND `dc`.`DateReceived` >= @toDate\r\nAND `dc`.`UserCurrentId` = @userId\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT `d`.*, `dc`.`DocumentCopyId`, `dc`.`DateReceived`, \r\n	1 as `IsViewed`\r\nFROM `document` as `d` \r\nJOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId`\r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`CategoryBusinessId` = 4 \r\nAND `d`.DocTypeId is NULL\r\nAND `dc`.`UserCurrentId` = @userId\r\nORDER BY `dc`.`DateReceived` DESC', 'SELECT `dc`.DocumentCopyId\r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE (`dc`.`Status` != 2 \r\nOr `d`.`CategoryBusinessId` != 4 \r\nOr `d`.DocTypeId is not NULL\r\nOr `dc`.`UserCurrentId` != @userId)\r\nAND `dc`.`DocumentCopyId` IN ({0})', 'SELECT COUNT(1) \r\nFROM `document` as `d` \r\nINNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` \r\nWHERE `dc`.`Status` = 2 \r\nAND `d`.`CategoryBusinessId` = 4 \r\nAND `d`.DocTypeId is NULL\r\nAND `dc`.`UserCurrentId` = @userId', 'SELECT COUNT(1) FROM `document` as `d` INNER JOIN `documentcopy` as `dc` ON `d`.`DocumentId` = `dc`.`DocumentId` WHERE `dc`.`Status` = 2 AND `d`.`CategoryBusinessId` = 4 AND `dc`.`UserCurrentId` = @userId', null, '', '', '0', null, null, '', '', '0', '2017-07-14', '3', '', '', '3', null, '', null, '254', '1');
