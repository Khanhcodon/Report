(function(n){function f(t){var i=this;t=n.event.fix(t||window.e);t.type="paste";setTimeout(function(){n.event.handle.call(i,t)},1)}var e=window.orientation!=undefined,u=n.browser.opera||n.browser.mozilla&&parseFloat(n.browser.version.substr(0,3))<1.9?"input":"paste",i=!1,t=0,r=!1;n.event.special.paste={setup:function(){this.addEventListener?this.addEventListener(u,f,!1):this.attachEvent&&this.attachEvent(u,f)},teardown:function(){this.removeEventListener?this.removeEventListener(u,f,!1):this.detachEvent&&this.detachEvent(u,f)}};n.extend({mask:{rangeCursor:{start:0,end:0},rules:{z:/[a-z]/,Z:/[A-Z]/,a:/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-ZçÇáàãâéèêíìóòôõúùü]/,Q:/Q/,q:/[1-4]/},keyRepresentation:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},iphoneKeyRepresentation:{10:"go",127:"delete"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:!1,textAlign:!0,selectCharsOnFocus:!1,autoTab:!1,setSize:!1,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){}},masks:{financialdate:{mask:"39/19"},datetime:{mask:"39/19/9999"},date:{mask:"39/19/9999"},dateTime:{mask:"39/19/9999"},year:{mask:"9999"},quarter:{mask:"Qq/9999"},month:{mask:"19/9999"},time:{mask:"23:59"},cmnd:{mask:"999 999 999"},integer:{mask:"999.999.999.999.999",type:"reverse",defaultValue:"0"},signedinteger:{mask:"999.999.999.999.999",type:"reverse",defaultValue:"+0"},"signed-integer":{mask:"999.999.999.999.999",type:"reverse",defaultValue:"+0"},decimal:{mask:"99,999.999.999.999.999",type:"reverse",defaultValue:"000"},decimal1:{mask:"9,999.999.999.999.999",type:"reverse",defaultValue:"00"},decimal2:{mask:"99,999.999.999.999.999",type:"reverse",defaultValue:"000"},decimal3:{mask:"999,999.999.999.999.999",type:"reverse",defaultValue:"0000"}},init:function(){if(!this.hasInit){var r=this,t,i=e?this.iphoneKeyRepresentation:this.keyRepresentation;for(this.ignore=!1,this.ignoreMask=!1,this.arrIgnoreMasks=["datetime","financialdate","date","dateTime","year","quarter","month"],t=0;t<=9;t++)this.rules[t]=new RegExp("[0-"+t+"]");this.keyRep=i;this.ignoreKeys=[];n.each(i,function(n){r.ignoreKeys.push(parseInt(n))});this.hasInit=!0}},set:function(t,i){var r=this,f=n(t),u="maxLength";return i=i||{},this.init(),f.each(function(){var o;i.attr&&(r.options.attr=i.attr);var f=n(this),t=n.extend({},r.options),s=f.attr(t.attr),e="";if(e=typeof i=="string"?i:s!=""?s:null,e&&(t.mask=e),r.masks[e]&&(t=n.extend(t,r.masks[e])),typeof i=="object"&&i.constructor!=Array&&(t=n.extend(t,i)),n.metadata&&(t=n.extend(t,f.metadata())),t.mask!=null){f.data("mask")&&r.unset(f);var h=t.defaultValue,c=t.type=="reverse",l=new RegExp(t.fixedChars,"g");t.maxLength==-1&&(t.maxLength=f.attr(u));t=n.extend({},t,{fixedCharsReg:new RegExp(t.fixedChars),fixedCharsRegG:l,maskArray:t.mask.split(""),maskNonFixedCharsArray:t.mask.replace(l,"").split("")});(t.type=="fixed"||c)&&t.setSize&&!f.attr("size")&&f.attr("size",t.mask.length);c&&t.textAlign&&f.css("text-align","right");(this.value!=""||h!="")&&(o=r.string(this.value!=""?this.value:h,t),this.defaultValue=o,f.val(o));t.type=="infinite"&&(t.type="repeat");f.data("mask",t);f.removeAttr(u);f.bind("keydown.mask",{func:r._onKeyDown,thisObj:r},r._onMask).bind("keypress.mask",{func:r._onKeyPress,thisObj:r},r._onMask).bind("keyup.mask",{func:r._onKeyUp,thisObj:r},r._onMask).bind("paste.mask",{func:r._onPaste,thisObj:r},r._onMask).bind("focus.mask",r._onFocus).bind("blur.mask",r._onBlur).bind("change.mask",r._onChange)}})},unset:function(t){var i=n(t);return i.each(function(){var t=n(this),i;t.data("mask")&&(i=t.data("mask").maxLength,i!=-1&&t.attr("maxLength",i),t.unbind(".mask").removeData("mask"))})},string:function(t,i){var r,f,e,u;this.init();r={};typeof t!="string"&&(t=String(t));switch(typeof i){case"string":this.masks[i]?r=n.extend(r,this.masks[i]):r.mask=i;break;case"object":r=i}return r.fixedChars||(r.fixedChars=this.options.fixedChars),f=new RegExp(r.fixedChars),e=new RegExp(r.fixedChars,"g"),r.type=="reverse"&&r.defaultValue&&typeof this.signals[r.defaultValue.charAt(0)]!="undefined"&&(u=t.charAt(0),r.signal=typeof this.signals[u]!="undefined"?this.signals[u]:this.signals[r.defaultValue.charAt(0)],r.defaultValue=r.defaultValue.substring(1)),this.__maskArray(t.split(""),r.mask.replace(e,"").split(""),r.mask.split(""),r.type,r.maxLength,r.defaultValue,f,r.signal)},_onFocus:function(){var t=n(this),i=t.data("mask");i.inputFocusValue=t.val();i.changed=!1;i.selectCharsOnFocus&&t.select()},_onBlur:function(){var t=n(this),i=t.data("mask");i.inputFocusValue==t.val()||i.changed||t.trigger("change")},_onChange:function(){n(this).data("mask").changed=!0},_onMask:function(t){var r=t.data.thisObj,i={};return(i._this=t.target,i.$this=n(i._this),i.$this.attr("readonly"))?!0:(i.data=i.$this.data("mask"),i[i.data.type]=!0,i.value=i.$this.val(),i.nKey=r.__getKeyNumber(t),i.range=r.__getRange(i._this),i.valueArray=i.value.split(""),t.data.func.call(r,t,i))},_onKeyDown:function(i,r){var f,u;return(this.ignoreMask=n.inArray(r.$this.attr("data-mask"),this.arrIgnoreMasks)>-1,this.ignoreMask)?!0:(f=this.__getRange(r._this).start,t=r.$this.val().length-f,this.ignore=n.inArray(r.nKey,this.ignoreKeys)>-1||i.ctrlKey||i.metaKey||i.altKey,this.ignore&&(u=this.keyRep[r.nKey],r.data.onValid.call(r._this,u?u:"",r.nKey)),e?this._keyPress(i,r):!0)},_onKeyUp:function(n,t){return this.ignoreMask?!0:t.nKey==9||t.nKey==16?!0:t.data.type=="repeat"?(this.__autoTab(t),!0):this._onPaste(n,t)},_onPaste:function(i,u){var f,e;return this.ignoreMask?!0:(u.reverse&&this.__changeSignal(i.type,u),f=this.__maskArray(u.valueArray,u.data.maskNonFixedCharsArray,u.data.maskArray,u.data.type,u.data.maxLength,u.data.defaultValue,u.data.fixedCharsReg,u.data.signal),u.nKey!=39&&u.nKey!=37&&u.nKey!=35&&u.nKey!=36&&u.$this.val(f),e=this.__getRange(u._this).start,(u.$this.attr("data-mask")=="decimal"||u.$this.attr("data-mask")=="signedinteger"||u.$this.attr("data-mask")=="integer")&&u.nKey!=39&&u.nKey!=37&&u.nKey!=35&&u.nKey!=36&&(u.nKey==8||u.nKey==46?f.length<t?this.__setRange(u._this,0):this.__setRange(u._this,f.length-t):r?this.__setRange(u._this,f.indexOf(",")):this.__setRange(u._this,this.rangeCursor.start,this.rangeCursor.end)),!u.reverse&&u.data.defaultValue.length&&u.range.start==u.range.end&&this.__setRange(u._this,u.range.start,u.range.end),(n.browser.msie||n.browser.safari)&&!u.reverse&&this.__setRange(u._this,u.range.start,u.range.end),this.ignore)?!0:(this.__autoTab(u),!0)},_onKeyPress:function(n,u){var h,p,w,a,v,o,e,y;if(this.ignoreMask||(h=this.__getRange(u._this).start,t=u.$this.val().length-h,this.ignore))return!0;u.reverse&&this.__changeSignal(n.type,u);var f=String.fromCharCode(u.nKey),s=u.range.start,c=u.value,l=u.data.maskArray;if(r=!1,u.reverse&&(p=c.substr(0,s),w=c.substr(u.range.end,c.length),u.$this.attr("data-mask")=="decimal"&&s<u._this.value.indexOf(",")&&(u.range.end-(u._this.value.indexOf(",")+1)==1?(f=f+u._this.value.substring(u._this.value.indexOf(","),u.range.end),r=!0):u.range.end-(u._this.value.indexOf(",")+1)==2&&(f=f+"00",r=!0)),c=p+f+w,u.data.signal&&s-u.data.signal.length>0&&(s-=u.data.signal.length)),a=c.replace(u.data.fixedCharsRegG,"").split(""),v=this.__extraPositionsTill(s,l,u.data.fixedCharsReg),u.rsEp=s+v,u.repeat&&(u.rsEp=0),!this.rules[l[u.rsEp]]||u.data.maxLength!=-1&&a.length>=u.data.maxLength&&u.repeat)return u.data.onOverflow.call(u._this,f,u.nKey),!1;if(this.rules[l[u.rsEp]].test(f))u.data.onValid.call(u._this,f,u.nKey);else if(u.$this.attr("data-mask")=="decimal"){if(f!=","||f==","&&i&&h>u.$this.val().indexOf(","))return u.data.onInvalid.call(u._this,f,u.nKey),!1}else return u.data.onInvalid.call(u._this,f,u.nKey),!1;return o=this.__maskArray(a,u.data.maskNonFixedCharsArray,l,u.data.type,u.data.maxLength,u.data.defaultValue,u.data.fixedCharsReg,u.data.signal,v),u.$this.val(o),(u.$this.attr("data-mask")=="decimal"||u.$this.attr("data-mask")=="signedinteger"||u.$this.attr("data-mask")=="integer")&&(e=o.indexOf(","),o.indexOf(".")==0&&(e--,t++),e<0?i=!1:h<=e&&(i=f==","?!0:!1),i?h>e?this.rangeCursor.start+1==o.length?(this.__setRange(u._this,e),this.rangeCursor.start=e,this.rangeCursor.end=e):this.rangeCursor.start+1<o.length&&(this.__setRange(u._this,this.rangeCursor.start+1,this.rangeCursor.start+2),this.rangeCursor.start=this.rangeCursor.start+1,this.rangeCursor.end=this.rangeCursor.start+2):(this.__setRange(u._this,e+1,e+2),this.rangeCursor.start=e+1,this.rangeCursor.end=e+2):r?this.__setRange(u._this,o.indexOf(",")):(y=o.length-t,this.rangeCursor.start=y<=0?o.length:y,this.rangeCursor.end=this.rangeCursor.start,this.__setRange(u._this,this.rangeCursor.start))),u.reverse?this._keyPressReverse(n,u):u.fixed?this._keyPressFixed(n,u):!0},_keyPressFixed:function(n,t){return t.range.start==t.range.end?(t.rsEp==0&&t.value.length==0||t.rsEp<t.value.length)&&this.__setRange(t._this,t.rsEp,t.rsEp+1):this.__setRange(t._this,t.range.start,t.range.end),!0},_keyPressReverse:function(t,i){return n.browser.msie&&(i.range.start==0&&i.range.end==0||i.range.start!=i.range.end)&&this.__setRange(i._this,i.value.length),!1},__autoTab:function(n){if(n.data.autoTab&&(n.$this.val().length>=n.data.maskArray.length&&!n.repeat||n.data.maxLength!=-1&&n.valueArray.length>=n.data.maxLength&&n.repeat)){var t=this.__getNextInput(n._this,n.data.autoTab);t&&(n.$this.trigger("blur"),t.focus().select())}},__changeSignal:function(n,t){if(t.data.signal!==!1){var i=n=="paste"?t.value.charAt(0):String.fromCharCode(t.nKey);this.signals&&typeof this.signals[i]!="undefined"&&(t.data.signal=this.signals[i])}},__getKeyNumber:function(n){return n.charCode||n.keyCode||n.which},__maskArray:function(n,t,i,r,u,f,e,o,s){r=="reverse"&&n.reverse();n=this.__removeInvalidChars(n,t,r=="repeat"||r=="infinite");f&&(n=this.__applyDefaultValue.call(n,f));n=this.__applyMask(n,i,s,e);switch(r){case"reverse":return n.reverse(),(o||"")+n.join("").substring(n.length-i.length);case"infinite":case"repeat":var h=n.join("");return u!=-1&&n.length>=u?h.substring(0,u):h;default:return n.join("").substring(0,i.length)}return""},__applyDefaultValue:function(n){for(var i=n.length,r=this.length,t=r-1;t>=0;t--)if(this[t]==n.charAt(0))this.pop();else break;for(t=0;t<i;t++)this[t]||(this[t]=n.charAt(t));return this},__removeInvalidChars:function(n,t,i){for(var r=0,u=0;r<n.length;r++)t[u]&&this.rules[t[u]]&&!this.rules[t[u]].test(n[r])&&(n.splice(r,1),i||u--,r--),i||u++;return n},__applyMask:function(n,t,i,r){typeof i=="undefined"&&(i=0);for(var u=0;u<n.length+i;u++)t[u]&&r.test(t[u])&&n.splice(u,0,t[u]);return n},__extraPositionsTill:function(n,t,i){for(var r=0;i.test(t[n++]);)r++;return r},__getNextInput:function(t,i){for(var e=t.form.elements,h=n.inArray(t,e)+1,u=null,r=h;r<e.length;r++)if(u=n(e[r]),this.__isNextInput(u,i))return u;for(var o=document.forms,c=n.inArray(t.form,o)+1,s=null,f=c;f<o.length;f++)for(s=o[f].elements,r=0;r<s.length;r++)if(u=n(s[r]),this.__isNextInput(u,i))return u;return null},__isNextInput:function(n,t){var i=n.get(0);return i&&(i.offsetWidth>0||i.offsetHeight>0)&&i.nodeName!="FIELDSET"&&(t===!0||typeof t=="string"&&n.is(t))},__setRange:function(n,t,i){if(typeof i=="undefined"&&(i=t),n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.collapse();r.moveStart("character",t);r.moveEnd("character",i-t);r.select()}},__getRange:function(t){if(!n.browser.msie)return{start:t.selectionStart,end:t.selectionEnd};var i={start:0,end:0},r=document.selection.createRange();return i.start=0-r.duplicate().moveStart("character",-1e5),i.end=i.start+r.text.length,i},unmaskedVal:function(t){return n(t).val().replace(n.mask.fixedCharsRegG,"")}}});n.fn.extend({setMask:function(t){return n.mask.set(this,t)},unsetMask:function(){return n.mask.unset(this)},unmaskedVal:function(){return n.mask.unmaskedVal(this[0])}})})(jQuery);
//# sourceMappingURL=jquery.meio.mask.min.js.map
