(function(n,t,i){var s,o;if(typeof t=="undefined")throw n.resources.notify.noJquery;if(typeof i=="undefined")throw n.resources.notify.noUnderscore;var f={CanBoCungDonVi:"CanBoCungDonVi",CanBoCungCap:"CanBoCungCap",CanBoCungNutCha:"CanBoCungNutCha",CanBoCapDuoi:"CanBoCapDuoi",CanBoCapTren:"CanBoCapTren"},u={DonViHienTai:"DonViHienTai",DonViTrucThuoc:"DonViTrucThuoc",DonViCapDuoi:"DonViCapDuoi"},e={TheoCanBo:"TheoCanBo",TheoCap:"TheoCap",TheoViTri:"TheoViTri",TheoQuanHe:"TheoQuanHe"},r="-1";n.workflow={};n.workflow.getAddressByNodeFrom=function(u,f,o,h){var c=[];return u&&(u.USER_QUERIES&&u.USER_QUERIES.length>0&&t.each(u.USER_QUERIES,function(t,r){var u=i.find(h,function(n){return n.value==r.UserId});u&&c.push({queryType:e.TheoCanBo,label:u.username+" - "+u.fullname,objecttype:n.resources.workflow.user,value:JSON.stringify(r)})}),u.LEVEL_QUERIES&&u.LEVEL_QUERIES.length>0&&t.each(u.LEVEL_QUERIES,function(t,u){var s=n.resources.doctype.allpeople,h,f;u.PositionId!==r&&(f=i.find(o,function(n){return n.value===parseInt(u.PositionId)}),f&&(s=f.label),h=n.resources.doctype.level+" "+u.Level+"\\"+s,c.push({queryType:e.TheoCap,label:h,objecttype:n.resources.doctype.level,value:JSON.stringify(u)}))}),u.POSITION_QUERIES&&u.POSITION_QUERIES.length>0&&t.each(u.POSITION_QUERIES,function(t,u){var a=n.resources.doctype.allpeople,v="",h,y,l;u.PositionId!==r&&(h=i.find(o,function(n){return n.value===parseInt(u.PositionId)}),h&&(a=h.label),y="\\"+s(u.Position),l=i.find(f,function(n){return n.value==u.DepId}),l&&(v=l.pathname+y+"\\"+a),c.push({queryType:e.TheoViTri,label:v,objecttype:n.resources.workflow.position,value:JSON.stringify(u)}))}),u.RELATION_QUERIES&&u.RELATION_QUERIES.length>0&&t.each(u.RELATION_QUERIES,function(t,u){var h=n.resources.doctype.allpeople,l,f;u.PositionId!==r&&(f=i.find(o,function(n){return n.value===parseInt(u.PositionId)}),f&&(h=f.label),l="Node "+u.NodeId+"\\"+s(u.Relation)+"\\"+h,c.push({queryType:e.TheoQuanHe,label:l,objecttype:n.resources.workflow.relation,value:JSON.stringify(u)}))})),c};n.workflow.getUserByPosition=function(n,t,f,e,s){var c=[],h=[];return t===""||t===u.DonViHienTai?h=i.filter(e,function(t){return t.idext===n&&(f==r?!0:t.positionid===parseInt(f))}):t===u.DonViCapDuoi?h=i.filter(e,function(t){return t.idext.indexOf(n+".")>-1&&o(t.idext)===o(n)+1&&(f==r?!0:t.positionid===parseInt(f))}):t===u.DonViTrucThuoc&&(h=i.filter(e,function(t){return t.idext.indexOf(n+".")>-1&&(f==r?!0:t.positionid===parseInt(f))})),h.length>0&&(c=i.filter(s,function(n){return i.contains(i.pluck(h,"userid"),n.value)})),c};n.workflow.getUserByLevel=function(n,t,u,f){var e=[],s=i.filter(u,function(i){return o(i.idext)==n&&(t==r?!0:i.positionid===parseInt(t))});return s.length>0&&(e=i.filter(f,function(n){return i.contains(i.pluck(s,"userid"),n.value)})),e};n.workflow.getDepIdFromDepExt=function(n){if(n.indexOf(".")>-1){var t=n.split(".");return parseInt(t[t.length-1])}return parseInt(n)};s=function(t){var i="";switch(t){case u.DonViCapDuoi:i=n.resources.workflow.belowoffice;break;case u.DonViTrucThuoc:i=n.resources.workflow.underoffice;break;case u.DonViHienTai:i=n.resources.workflow.currentoffice;break;case f.CanBoCungDonVi:i=n.resources.workflow.sameoffice;break;case f.CanBoCungCap:i=n.resources.workflow.peernode;break;case f.CanBoCungNutCha:i=n.resources.workflow.sameparentnode;break;case f.CanBoCapDuoi:i=n.resources.workflow.underuser;break;case f.CanBoCapTren:i=n.resources.workflow.overuser}return i};o=function(n){if(n.indexOf(".")>-1){var t=n.split(".");return t.length}return 1}})(window.egov=window.egov||{},window.jQuery,window._);
//# sourceMappingURL=bkav.workflow.min.js.map
