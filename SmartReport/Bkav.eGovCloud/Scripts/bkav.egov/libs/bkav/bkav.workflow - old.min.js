(function(n,t,i){var o,e;if(typeof t=="undefined")throw"Thư viện này sử dụng jQuery, hãy tải thư viện jQuery trước khi sử dụng";if(typeof i=="undefined")throw"Thư viện này sử dụng Underscore, hãy tải thư viện Underscore trước khi sử dụng";var u={CanBoCungDonVi:"CanBoCungDonVi",CanBoCungCap:"CanBoCungCap",CanBoCungNutCha:"CanBoCungNutCha",CanBoCapDuoi:"CanBoCapDuoi",CanBoCapTren:"CanBoCapTren"},r={DonViHienTai:"DonViHienTai",DonViTrucThuoc:"DonViTrucThuoc",DonViCapDuoi:"DonViCapDuoi"},f={TheoCanBo:"TheoCanBo",TheoCap:"TheoCap",TheoViTri:"TheoViTri",TheoQuanHe:"TheoQuanHe"};n.workflow={};n.workflow.getAddressByNodeFrom=function(n,r,u,e){var s=[];return n&&(n.USER_QUERIES&&n.USER_QUERIES.length>0&&t.each(n.USER_QUERIES,function(n,t){var r=i.find(e,function(n){return n.value==t.UserId});r&&s.push({queryType:f.TheoCanBo,label:r.username+" - "+r.fullname,objecttype:"Cán bộ",value:JSON.stringify(t)})}),n.LEVEL_QUERIES&&n.LEVEL_QUERIES.length>0&&t.each(n.LEVEL_QUERIES,function(n,t){var e="Tất cả mọi người",o,r;t.PositionId!=="*"&&(r=i.find(u,function(n){return n.value===parseInt(t.PositionId)}),r&&(e=r.label),o="Cấp "+t.Level+"\\"+e,s.push({queryType:f.TheoCap,label:o,objecttype:"Cấp",value:JSON.stringify(t)}))}),n.POSITION_QUERIES&&n.POSITION_QUERIES.length>0&&t.each(n.POSITION_QUERIES,function(n,t){var c="Tất cả mọi người",l="",e,a,h;t.PositionId!=="*"&&(e=i.find(u,function(n){return n.value===parseInt(t.PositionId)}),e&&(c=e.label),a="\\"+o(t.Position),h=i.find(r,function(n){return n.value==t.DepId}),h&&(l=h.pathname+a+"\\"+c),s.push({queryType:f.TheoViTri,label:l,objecttype:"Vị trí",value:JSON.stringify(t)}))}),n.RELATION_QUERIES&&n.RELATION_QUERIES.length>0&&t.each(n.RELATION_QUERIES,function(n,t){var e="Tất cả mọi người",h,r;t.PositionId!=="*"&&(r=i.find(u,function(n){return n.value===parseInt(t.PositionId)}),r&&(e=r.label),h="Node "+t.NodeId+"\\"+o(t.Relation)+"\\"+e,s.push({queryType:f.TheoQuanHe,label:h,objecttype:"Quan hệ",value:JSON.stringify(t)}))})),s};n.workflow.getUserByPosition=function(n,t,u,f,o){var h=[],s=[];return t===""||t===r.DonViHienTai?s=i.filter(f,function(t){return t.idext===n&&(u=="*"?!0:t.positionid===parseInt(u))}):t===r.DonViCapDuoi?s=i.filter(f,function(t){return t.idext.indexOf(n+".")>-1&&e(t.idext)===e(n)+1&&(u=="*"?!0:t.positionid===parseInt(u))}):t===r.DonViTrucThuoc&&(s=i.filter(f,function(t){return t.idext.indexOf(n+".")>-1&&(u=="*"?!0:t.positionid===parseInt(u))})),s.length>0&&(h=i.filter(o,function(n){return i.contains(i.pluck(s,"userid"),n.value)})),h};n.workflow.getUserByLevel=function(n,t,r,u){var f=[],o=i.filter(r,function(i){return e(i.idext)==n&&(t=="*"?!0:i.positionid===parseInt(t))});return o.length>0&&(f=i.filter(u,function(n){return i.contains(i.pluck(o,"userid"),n.value)})),f};n.workflow.getDepIdFromDepExt=function(n){if(n.indexOf(".")>-1){var t=n.split(".");return parseInt(t[t.length-1])}return parseInt(n)};o=function(n){var t="";switch(n){case r.DonViCapDuoi:t="Đơn vị cấp dưới";break;case r.DonViTrucThuoc:t="Đơn vị trực thuộc";break;case r.DonViHienTai:t="Đơn vị hiện tại";break;case u.CanBoCungDonVi:t="Cùng đơn vị";break;case u.CanBoCungCap:t="Node ngang hàng";break;case u.CanBoCungNutCha:t="Cùng Node cha";break;case u.CanBoCapDuoi:t="Cấp dưới";break;case u.CanBoCapTren:t="Cấp trên"}return t};e=function(n){if(n.indexOf(".")>-1){var t=n.split(".");return t.length}return 1}})(window.egov=window.egov||{},window.jQuery,window._);
//# sourceMappingURL=bkav.workflow%20-%20old.min.js.map
