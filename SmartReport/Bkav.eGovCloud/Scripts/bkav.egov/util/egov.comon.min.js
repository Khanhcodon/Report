(function(n,t,i,r){var f,u;if(typeof t=="undefined")throw"Thư viện này sử dụng jQuery, hãy tải thư viện jQuery trước khi sử dụng";if(typeof i=="undefined")throw"Thư viện này sử dụng Underscore, hãy tải thư viện Underscore trước khi sử dụng";var e=["áàảãạăắằẳẵặâấầẩẫậ","ÁÀẢÃẠĂẮẰẲẴẶÂẤẦẨẪẬ","đ","Đ","éèẻẽẹêếềểễệ","ÉÈẺẼẸÊẾỀỂỄỆ","íìỉĩị","ÍÌỈĨỊ","óòỏõọơớờởỡợôốồổỗộ","ÓÒỎÕỌƠỚỜỞỠỢÔỐỒỔỖỘ","ưứừửữựúùủũụ","ƯỨỪỬỮỰÚÙỦŨỤ","ýỳỷỹỵ","ÝỲỶỸỴ"],s=["a","A","d","D","e","E","i","I","o","O","u","U","y","Y"],o='<li id="${value}" label="${attr.label}" rel="${attr.rel}" idext="${attr.idext}" class="jstree-${state}"><ins class="jstree-icon">&nbsp;<\/ins><a href="#" class="">';o+='<ins class="jstree-icon">&nbsp;<\/ins>${data}<\/a><\/li>';f='<li id="${value}" rel="${attr.rel}" idext="${attr.idext}" class="jstree-${state}"><ins class="jstree-icon">&nbsp;<\/ins><a href="#" class="">';f+='<ins class="jstree-checkbox">&nbsp;<\/ins><ins class="jstree-icon">&nbsp;<\/ins>${data}<\/a><\/li>';u=["themes","json_data","ui","crrm"];n.utilities={};n.utilities.checkbox={};n.utilities.checkbox.checkAndUnCheckAll=function(n,i){var r=i.length;n.bind("click",function(){for(var u=this.checked,n=0;n<r;n++)i[n].checked=u,t(i[n]).trigger("change");u||(processAll(),viewTarget())});i.bind("click",function(){var t=0,r=0,u;i.each(function(){t++;this.checked==!0&&r++});u=t==r?!0:!1;n.prop("checked",u);processAll();viewTarget()})};n.utilities.jstree={};n.utilities.jstree.getChildrens=function(t,r,u,f,e){var o=i.filter(u,function(n){return n.parentid==t}),h=i.filter(e,function(n){return n.departmentid===t}),c,l,s,a;if(o.length>0)for(c=0;c<o.length;c++)(n.utilities.jstree.getChildrens(o[c].value,!1,u,[],[]).length>0||r&&h.length>0)&&(o[c].state="closed");if(r&&h.length>0)for(l=0;l<h.length;l++)s=i.find(f,function(n){return n.value===h[l].userid}),s&&(a={value:"user_"+s.value,data:s.fullname,parentid:t,state:"leaf",metadata:{id:"user_"+s.value},attr:{id:"user_"+s.value,rel:"people",idext:h[l].idext}},o.push(a));return o};n.utilities.jstree.bindJsTree=function(r,f,e,o,s,h,c,l,a){var v=i.find(s,function(n){return n.parentid===0});e&&u.push("checkbox");o&&u.push("dnd");v&&(r.jstree({json_data:{data:[{data:v.data.toString(),metadata:{id:v.value},state:"closed",attr:{id:v.value,rel:"dept",idext:v.idext,label:v.label},children:n.utilities.jstree.getChildrens(v.value,f,s,h,c)}]},crrm:o==!1?{}:{move:{check_move:function(n){var r=i.find(s,function(t){return t.value===parseInt(n.o.attr("id"))}),t;return r?r.level!=1?!1:(t=this._get_parent(n.o),!t)?!1:(t=t==-1?this.get_container():t,t===n.np)?!0:t[0]&&n.np[0]&&t[0]===n.np[0]?!0:!1:!1}}},dnd:o==!1?{}:{drop_target:!1,drag_target:!1},plugins:u}).bind("loaded.jstree",function(i,u){var o=1;u.inst.get_container().find("li").each(function(){u.inst.get_path(t(this)).length<=o&&u.inst.open_node(t(this))});r.bind("open_node.jstree",function(t,i){i.inst._get_children(i.rslt.obj).length==0&&n.utilities.jstree.appendChild(i.rslt.obj,parseInt(i.rslt.obj.attr("id")),f,e,s,h,c)});typeof l=="function"&&l(a)}),setTimeout(function(){t.jstree._focused().select_node("#"+v.value)},200))};n.utilities.jstree.appendChild=function(i,r,u,e,s,h,c){var a=n.utilities.jstree.getChildrens(r,u,s,h,c),l;a.length>0&&(l=t("<ul><\/ul>"),l.appendTo(i),e?(t.template("checkboxTemplate",f),t.tmpl("checkboxTemplate",a).appendTo(l),t(i).find("li").each(function(n,r){t(r).addClass(i.hasClass("jstree-checked")?"jstree-checked":"jstree-unchecked")})):(t.template("itemTreeviewTemplate",o),t.tmpl("itemTreeviewTemplate",a).appendTo(l)),l.children("li:last").addClass("jstree-last"))};n.utilities.string={};n.utilities.string.stripVietnameseChars=function(n){for(var i,r,t=[],u=0;u<n.length;u++)t.push(n.charAt(u));for(i=0;i<t.length;i++)for(r=0;r<e.length;r++)e[r].indexOf(t[i])>-1&&(t[i]=s[r]);return t.join("")};n.utilities.array={};n.utilities.array.distinct=function(n){for(var i,e,f=[],u={},t=0;t<n.length;t++)i=JSON.stringify(n[t]),e=n[t],u[i]===r?(f.push(e),u[i]=1):u[i]++;return f}})(window.egov=window.egov||{},window.jQuery,window._),function(n){n.fn.serializeObject=function(){var t={},i=this.serializeArray();return n.each(i,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}(window.jQuery);