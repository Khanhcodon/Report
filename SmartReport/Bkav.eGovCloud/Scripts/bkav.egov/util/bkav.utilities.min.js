(function(n,t,i,r){var f=["áàảãạăắằẳẵặâấầẩẫậ","ÁÀẢÃẠĂẮẰẲẴẶÂẤẦẨẪẬ","đ","Đ","éèẻẽẹêếềểễệ","ÉÈẺẼẸÊẾỀỂỄỆ","íìỉĩị","ÍÌỈĨỊ","óòỏõọơớờởỡợôốồổỗộ","ÓÒỎÕỌƠỚỜỞỠỢÔỐỒỔỖỘ","ưứừửữựúùủũụ","ƯỨỪỬỮỰÚÙỦŨỤ","ýỳỷỹỵ","ÝỲỶỸỴ"],e=["a","A","d","D","e","E","i","I","o","O","u","U","y","Y"],o='<li id="${value}" label="${attr.label}" rel="${attr.rel}" idext="${attr.idext}" class="jstree-${state}"><ins class="jstree-icon">&nbsp;<\/ins><a href="#" class=""><ins class="jstree-icon">&nbsp;<\/ins>${data}<\/a><\/li>';var s='<li id="${value}" rel="${attr.rel}" idext="${attr.idext}" class="jstree-${state}"><ins class="jstree-icon">&nbsp;<\/ins><a href="#" class=""><ins class="jstree-checkbox">&nbsp;<\/ins><ins class="jstree-icon">&nbsp;<\/ins>${data}<\/a><\/li>',h='<li id="${value}" rel="${attr.rel}" idext="${attr.idext}" class="jstree-${state} jstree-unchecked"><ins class="jstree-icon">&nbsp;<\/ins><a href="#" class=""><ins class="jstree-checkbox">&nbsp;<\/ins><ins class="jstree-icon">&nbsp;<\/ins>${data}<\/a><\/li>',u=["themes","json_data","ui","crrm"];n.utilities={};n.utilities.checkbox={};n.utilities.checkbox.checkAndUnCheckAll=function(n,i,r){var u=i.length;n.bind("click",function(){for(var f=this.checked,n=0;n<u;n++)i[n].checked=f,t(i[n]).trigger("change");r&&typeof r=="function"&&r()});i.bind("click",function(){var t=0,u=0,f;i.each(function(){t++;this.checked==!0&&u++});f=t==u?!0:!1;n.prop("checked",f);r&&typeof r=="function"&&r()})};n.utilities.jstree={};n.utilities.jstree.getChildrens=function(t,r,u,f,e){var o=i.filter(u,function(n){return n.parentid==t}),h=i.filter(e,function(n){return n.departmentid===t}),c,l,s,a;if(o.length>0)for(c=0;c<o.length;c++)(n.utilities.jstree.getChildrens(o[c].value,!1,u,[],[]).length>0||r&&h.length>0)&&(o[c].state="closed");if(r&&h.length>0)for(l=0;l<h.length;l++)s=i.find(f,function(n){return n.value===h[l].userid}),s&&(a={value:"user_"+s.value,data:s.fullname,parentid:t,state:"leaf",metadata:{id:"user_"+s.value},attr:{id:"user_"+s.value,rel:"people",idext:h[l].idext}},o.push(a));return o};n.utilities.jstree.bindJsTree=function(r,f,e,o,s,h,c,l,a,v,y){var p=i.find(s,function(n){return n.parentid===0});e&&u.push("checkbox");o&&u.push("dnd");p&&r.jstree({json_data:{data:[{data:p.data.toString(),metadata:{id:p.value},state:"closed",attr:{id:p.value,rel:"dept",idext:p.idext,label:p.label},children:n.utilities.jstree.getChildrens(p.value,f,s,h,c)}]},crrm:o==!1?{}:{move:{check_move:function(n){var r=i.find(s,function(t){return t.value===parseInt(n.o.attr("id"))}),t;return r?r.level!=1?!1:(t=this._get_parent(n.o),!t)?!1:(t=t==-1?this.get_container():t,t===n.np)?!0:t[0]&&n.np[0]&&t[0]===n.np[0]?!0:!1:!1}}},dnd:o==!1?{}:{drop_target:!1,drag_target:!1},plugins:u}).bind("loaded.jstree",function(i,u){var o=1;u.inst.get_container().find("li").each(function(){u.inst.get_path(t(this)).length<=o&&u.inst.open_node(t(this))});r.bind("open_node.jstree",function(t,i){i.inst._get_children(i.rslt.obj).length==0&&n.utilities.jstree.appendChild(i.rslt.obj,parseInt(i.rslt.obj.attr("id")),f,e,s,h,c,v,y)});typeof l=="function"&&l(a)})};n.utilities.jstree.appendChild=function(i,u,f,e,c,l,a,v,y){var w,p,b;typeof v==r&&(v=!0);typeof y==r&&(y=!0);w=n.utilities.jstree.getChildrens(u,f,c,l,a);w.length>0&&(p=t("<ul><\/ul>"),p.appendTo(i),e?(b=y?s:h,t.template("checkboxTemplate",b),t.tmpl("checkboxTemplate",w).appendTo(p),v&&t(i).find("li").each(function(n,r){t(r).addClass(i.hasClass("jstree-checked")?"jstree-checked":"jstree-unchecked")})):(t.template("itemTreeviewTemplate",o),t.tmpl("itemTreeviewTemplate",w).appendTo(p)),p.children("li:last").addClass("jstree-last"))};n.utilities.string={};n.utilities.string.stripVietnameseChars=function(n){for(var i,r,t=[],u=0;u<n.length;u++)t.push(n.charAt(u));for(i=0;i<t.length;i++)for(r=0;r<f.length;r++)f[r].indexOf(t[i])>-1&&(t[i]=e[r]);return t.join("")};n.utilities.url={};n.utilities.url.getQueryStringValue=function(n,t){t||(t=location.search);n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+n+"=([^&#]*)"),i=r.exec(t);return i==null?"":decodeURIComponent(i[1].replace(/\+/g," "))};n.utilities.array={};n.utilities.array.distinct=function(n){for(var i,e,f=[],u={},t=0;t<n.length;t++)i=JSON.stringify(n[t]),e=n[t],u[i]===r?(f.push(e),u[i]=1):u[i]++;return f}})(window.egov=window.egov||{},window.jQuery,window._);