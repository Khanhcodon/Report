define(function(){"use strict";function t(){return egov.isMobile?egov.template.documentList.desktopToolbar:egov.template.documentList.mobileToolbar}egov.views.ToolbarView=Backbone.View.extend({events:{"keyup #SearchQuery":"_clientQuickSearch"},initialize:function(n){if(!(n.model instanceof egov.models.toolbarList))throw"Model truyền vào chưa đúng định dạng, chỉ chấp nhận model là egov.models.toolbarList";n.el instanceof jQuery?this.$el=n.el:this.el=n.el;this.documents=n.documents;this.$el.addClass("nav nav-pills");this.render()},render:function(){var t=this;this.model.each(function(i){var r=new n({model:i});egov.isMobile?t.$el.append(r.$el):t.$el.prepend(r.$el)})},_clientQuickSearch:function(n){if(n){egov.helper.destroyClickEvent(n);var t=$(n.target).val();egov.isMobile?(this.documents.clientQuickSearch(t),egov.events.isQuickFilter=!0):(n.keyCode==13||t==null)&&(egov.events.pressedEnterToSearch=!0,this.documents.clientQuickSearch(t))}}});var n=Backbone.View.extend({tagName:"li",className:"dropdown",events:{"click ul.dropdown-menu > li > a, li > a":"selected","tap li":"selectedMobile"},initialize:function(){egov.isMobile?(this.$el.addClass(this.model.get("className")),this.$el.addClass("pull-left hidden-xs")):(this.model.get("id")&&this.$el.attr("id",this.model.get("id")),this.model.get("className")!==""&&this.$el.addClass(this.model.get("className")),this.model.get("disable")&&this.$el.addClass("disabled"));this.render()},render:function(){var n=this,i,r;require([t()],function(t){n.$el.html($.tmpl(t,n.model.toJSON()));n.model.get("selected")&&n.$el.addClass("active");n.$("a").etip()});this.model.get("showSelected")&&(this.$selectedText=this.$(".selected-text"),i=this.model.get("data"),i!==null&&typeof i!="function"?(r=_.find(i,function(n){return n.selected}),r?this.$selectedText.text(this.model.get("text")+":"+r.text):this.$selectedText.text(this.model.get("text")+":"+this.model.get("defaultSelectedText"))):this.$selectedText.text(this.model.get("text")+":"+this.model.get("defaultSelectedText")))},selected:function(n){var t,r,i;if(n)if(n.preventDefault(),t=$(n.target),t.closest("li").toggleClass("active"),this.model.get("isDropdownMenu")){if(t.is(".dropdown-toggle"))return;r=t.attr("value");i=_.find(this.model.get("data"),function(n){return n.value==r});i&&typeof this.model.get("callback")=="function"&&this.model.get("callback")(i,t)}else typeof this.model.get("callback")=="function"&&this.model.get("callback")(this)},selectedMobile:function(n){var t,r,i;n&&(n.preventDefault(),t=$(n.target),t.parent().siblings().removeClass("active"),t.parent().addClass("active"),r=t.attr("value"),i=_.find(this.model.get("data"),function(n){return n.value==r}),i&&typeof this.model.get("callback")=="function"&&this.model.get("callback")(i))},setSelectedText:function(n){this.$selectedText.text(this.model.get("text")+":"+n)}});return egov.views.ToolbarView});