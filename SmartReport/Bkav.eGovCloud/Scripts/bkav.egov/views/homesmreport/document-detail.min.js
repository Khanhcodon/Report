define(function(){"use strict";return Backbone.View.extend({tagName:"div",initialize:function(n){this.model=n.model instanceof egov.models.document?n.model:new egov.models.document(n.model);this.render()},render:function(){var n=this,t;egov.dataManager.getCategories({success:function(t){var i=_.find(t,function(t){return t.CategoryId===n.model.get("CategoryId")}),r=i?i.CategoryName:"";n.model.set("CategoryName",r)}});egov.dataManager.getCurrentDoctypes({success:function(t){var i=_.find(t,function(t){return t.DocTypeId===n.model.get("DocTypeId")});i===undefined||n.model.set("DocTypeName",i.DocTypeName)}});egov.dataManager.getAllUsers({success:function(t){var r=_.find(t,function(t){return t.value==n.model.get("UserSuccessId")}),i;r&&n.model.set("UserNameSuccess",r.fullname+"("+r.username+")");i=_.find(t,function(t){return t.value==n.model.get("UserReturnedId")});i&&n.model.set("UserNameReturned",i.fullname+"("+i.username+")")}});t=this.model.toJSON();Object.getOwnPropertyNames(t).forEach(function(n){var i=t[n];i&&Date.parse(i)&&(i=Globalize.format(new Date(i),"dd/MM/yyyy hh:mm tt"));t[n]=i});require([egov.template.document.detail],function(i){n.$el.append($.tmpl(i,t))})}})});