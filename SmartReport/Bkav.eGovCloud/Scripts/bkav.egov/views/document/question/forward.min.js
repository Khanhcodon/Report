define([egov.template.question.forward],function(n){"use strict";return Backbone.View.extend({className:"forwardDialog",template:n,events:{"click .listUsers li":"selectUser"},initialize:function(n){this.question=n.question;this.questionId=n.questionId;var t=this;egov.request.getForwardList({success:function(n){t.render(t.template,n)},error:function(){}})},render:function(n,t){var i=this,r;i.$el.append($.tmpl(n,{users:t}));r={title:egov.resources.question.transfer,width:"750px",draggable:!0,keyboard:!0,height:"auto"};r.buttons=[{id:"sendTransfer",text:egov.resources.buttons.confirm,className:"btn-primary",disableProcess:!0,click:function(){var n=i.$el.find(".listUsers .selected").data("userid");i.forward(n)}},{id:"closeTransfer",text:egov.resources.common.closeButton,className:"btn-close",click:function(){i.$el.dialog("hide")}}];this.dialogSetting=r;i.$el.bindResources();i.$el.dialog(r);i.$el.find(".listUsers li").click(function(n){i.selectUser(n)});i.$el.find(".listUsers li").dblclick(function(n){i.selectUser(n);i.forward($(n.currentTarget).data("userid"))})},selectUser:function(n){var t=$(n.currentTarget);t.parent().children().removeClass("selected").find(".checkbox").removeClass("checked");t.addClass("selected").find(".checkbox").addClass("checked")},forward:function(n){var t=this,i=this.$(".txtTransferComment").val();i.trim()==""&&(i=egov.resources.question.defaultTransferComment);egov.pubsub.publish(egov.events.status.processing,egov.resources.common.forwarding);egov.request.forwardQuestion({data:{questionId:t.questionId,userId:n,comment:i},success:function(){$("tr#question-"+t.questionId).remove();t.question.tab.close();t.$el.dialog("hide");egov.pubsub.publish(egov.events.status.success,egov.resources.question.forwardsuccess)},error:function(){}})}})});