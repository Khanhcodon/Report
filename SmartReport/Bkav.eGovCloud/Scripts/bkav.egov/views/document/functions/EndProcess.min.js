define(["jquery","backbone"],function(n,t){"use strict";var i=t.View.extend({initialize:function(n){this.frame=n.frame;this.docCopyId=n.docCopyId;this.isHsmc=n.isHsmc;this.open()},open:function(){var t=this,i=egov.views.base.dialog;t.isHsmc?egov.message.show("Bạn có đồng ý kết thúc hồ sơ này không?",null,egov.message.messageButtons.YesNo,function(){var r={};r.width=600;r.title="Kết thúc xử lý";r.buttons=[{text:"Gửi",click:function(){t.save()}},{text:"Đóng",click:function(){i.close()}}];n.ajax({url:"/Finish/Index",data:{docCopyId:t.docCopyId},beforeSend:function(){i.open('<img src="../../Content/Images/ajax-loader.gif" />',r)},success:function(n){i.close();i.open(n,r)}})}):egov.message.show("Bạn có đồng ý kết thúc văn bản này không?",null,egov.message.messageButtons.YesNo,function(){n.get("/StorePrivate/GetStoreActive",{},function(n){n&&(n.storePrivate.length>0||n.storeShare.length>0||r(t.docCopyId,null,t.frame))}).fail(function(){egov.message.notification("Có lỗi xảy ra khi tải danh sách hồ sơ cá nhân",egov.message.messageTypes.error)})})}}),r=function(t,i,r){var f=n("input[name='__RequestVerificationToken']","#FinishUpdateFinish").val(),e=egov.views.base.dialog,u={documentCopyId:t,__RequestVerificationToken:f};i&&(u.storePrivateId=i);n.post("/Finish/UpdateFinish",u,function(n){if(n)if(n.error)egov.message.notification(n.message,egov.message.messageTypes.error);else{egov.message.notification("Kết thúc xử lý thành công",egov.message.messageTypes.success);e.close();r&&egov.cshtml.home.tab.closeActiveTab();var i=[t];egov.currentDocumentObject&&typeof egov.currentDocumentObject!="undefined"&&egov.currentDocumentObject.clientRemove(i)}})};return i});
//# sourceMappingURL=EndProcess.min.js.map
