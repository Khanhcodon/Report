define([],function(){"use strict";return Backbone.View.extend({initialize:function(n){this.frame=n.frame;this.docCopyId=n.docCopyId;this.isToolbar=n.isToolbar;this.open();this.delegateEvents()},open:function(){var n=this,t=egov.views.base.dialog,i={width:500,title:"Gửi ý kiến",buttons:[{text:"Đồng ý",click:function(){n.send(n.docCopyId,n.isToolbar)}},{text:"Bỏ qua",click:function(){t.close()}}]};t.open("<textarea tabindex='1' style='min-height: 0px;width:98%' rows='5' id='newComment' cols='20'><\/textarea>",i)},send:function(n,t){t=!0;var f=egov.views.base.dialog,i,r=this,o=r.frame,e=$("input[name='__RequestVerificationToken']","#DocumentSendComment").val(),u=$("#newComment");if(r.frame&&(i=document.getElementById(r.frame).contentWindow),u.val()===""){u.css({border:"1px solid #ff0000","background-color":"#ffeeee"});egov.message.show("Bạn chưa nhập nội dung ý kiến!");return}$.ajax({type:"POST",data:{documentCopyId:n,comment:u.val(),isToolbar:t,__RequestVerificationToken:e},url:"/Document/SendComment",beforeSend:function(){egov.message.notification("Đang gửi...",egov.message.messageTypes.processing,!1)},success:function(n){n.error?egov.message.show(n.error):(t&&i&&i.insertCommentView(n.Data),egov.message.notification("Gửi ý kiến thành công.",egov.message.messageTypes.success),f.close())},error:function(n){egov.message.notification(n.statusText,egov.message.messageTypes.error)}})},addComment:function(){}})});