define([],function(){"use strict";return Backbone.View.extend({tagName:"div",className:"egov-continue",initialize:function(n){var t=this;return t.document=n.document,t.render(),t},render:function(){var n=this;require([egov.template.document.continueProcess],function(t){n.$el.append(t);n.$el.dialog({title:"Tiếp tục xử lý",width:550,height:"auto",buttons:[{text:egov.resources.common.updateButton,className:"btn-primary",click:function(){n.send()}},{text:egov.resources.common.closeButton,click:function(){n.$el.dialog("hide")}}]});n.$("#comment").focus();n.$("input.datetime").datepicker({dateFormat:"dd/mm/yy"});var i=Globalize.parseDate(n.document.model.get("DateAppointed"));n.$("input.datetime").datepicker("setDate",i.format("dd/MM/yyyy"));n.time=i.format("THH:mm:ss")})},send:function(){var n,t,i,r;if($("#error").hide(),n=this.$("#comment").val(),n=="")return $("#error").show(),this.$("#comment").focus(),!1;t=this.$("input.datetime").val();String.isNullOrEmpty(t)||(i=Globalize.parseDate(t+this.time,"dd/MM/yyyyTHH:mm:ss"));r=this;egov.pubsub.publish(egov.events.status.processing,"Đang xử lý");egov.request.continueProcess({data:{documentCopyId:this.document.model.get("DocumentCopyId"),comment:n,dateAppointed:i.toISOString()},success:function(){r.document.closeTabAndReloadTreeNode();egov.pubsub.publish(egov.events.status.success,"Đã cập nhật hồ sơ thành công.")},error:function(){egov.pubsub.publish(egov.events.status.error,"Chức năng hiện không thực hiện được, vui lòng thử lại.")}});this.$el.dialog("hide")}})});