define(["jquery","backbone","text!templates/document/FormHtml/mainform-template.html","text!templates/document/FormHtml/subform-template.html","tmpl"],function(n,t,i,r){"use strict";var u=t.Model.extend({defaults:{ContentName:"",DocumentContentDetails:null,DocumentContentId:0,DocumentId:null,FormTypeId:1,IsMain:!1,Version:0,Content:""},initialize:function(){}}),f=t.View.extend({tagName:"div",events:{"touchend .subformTitle":"toggleContent"},initialize:function(n){this.model=new u(n.model);this.document=n.document;this.render()},render:function(){var t=this;t.model.get("Content")!==""?t.model.get("IsMain")===!0?(t.$el.attr("id","mainForm"),t.renderMainForm()):t.renderSubFrom():n.get("/Document/GetFormContent",{contentId:t.model.get("DocumentContentId"),isCreate:!1,doctypeId:t.document.model.get("DocTypeId")}).done(function(n){t.model.set("Content",n);t.model.get("IsMain")===!0?(t.$el.attr("id","mainForm"),t.renderMainForm()):t.renderSubFrom()})},renderMainForm:function(){this.$el.append(n.tmpl(i,this.model.toJSON()))},renderSubFrom:function(){this.$el.find("#subForm").length===0&&this.$el.append("<div id ='subForm'><\/div>");this.$subForm=this.$("#subForm");this.$subForm.append(n.tmpl(r,this.model.toJSON()))},renderDialog:function(){var t=this,n=this.$el;n.editor();n.dialog({height:"400px",width:"900px",draggable:!0,title:this.model.ContentName,buttons:[{text:"Đóng",click:function(){n.editor("destroy");t.document.renderForm();n.dialog("destroy")}},{text:"Lưu",className:"btn-primary",click:function(){n.editor("destroy");t.model.Content=n.html();t.document.renderForm();n.dialog("destroy")}}]})},toggleContent:function(t){t=t||window.event;t.preventDefault();n(".showOrHideContent").html().indexOf("▼")>=0?(n(".showOrHideContent").html(n(".showOrHideContent").html().replace("▼","►")),n(".showOrHideContent").attr("title","Hiển thị biểu mẫu"),this.$(".content").hide()):(n(".showOrHideContent").html(n(".showOrHideContent").html().replace("►","▼")),n(".showOrHideContent").attr("title","Ẩn biểu mẫu"),this.$(".content").show())}}),e=function(t){n(t).html()!=""&&(n(t).html().indexOf("▼")>=0?(n(t).html(n(t).html().replace("▼","►")),n(t).attr("title","Hiển thị biểu mẫu")):(n(t).html(n(t).html().replace("►","▼")),n(t).attr("title","Ẩn biểu mẫu")))};return f});
//# sourceMappingURL=html-tablet-mobile.min.js.map
